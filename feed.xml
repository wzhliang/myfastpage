<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.0">Jekyll</generator><link href="https://wzhliang.github.io/myfastpage/feed.xml" rel="self" type="application/atom+xml" /><link href="https://wzhliang.github.io/myfastpage/" rel="alternate" type="text/html" /><updated>2020-03-22T22:56:48-05:00</updated><id>https://wzhliang.github.io/myfastpage/feed.xml</id><title type="html">fastpages</title><subtitle>An easy to use blogging platform with support for Jupyter Notebooks.</subtitle><entry><title type="html">On Kubernetes</title><link href="https://wzhliang.github.io/myfastpage/markdown/2020/03/23/kubernetes-notes.html" rel="alternate" type="text/html" title="On Kubernetes" /><published>2020-03-23T00:00:00-05:00</published><updated>2020-03-23T00:00:00-05:00</updated><id>https://wzhliang.github.io/myfastpage/markdown/2020/03/23/kubernetes-notes</id><content type="html" xml:base="https://wzhliang.github.io/myfastpage/markdown/2020/03/23/kubernetes-notes.html">&lt;h1 id=&quot;general&quot;&gt;General&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;backed by google and has a long history (in container’s term)&lt;/li&gt;
  &lt;li&gt;currently managed by Linux foundation&lt;/li&gt;
  &lt;li&gt;google also provide GKE (Google Container Engine) built on top of it&lt;/li&gt;
  &lt;li&gt;supports both docker and rtk&lt;/li&gt;
  &lt;li&gt;bad UI&lt;/li&gt;
  &lt;li&gt;container-agnostic orchestration system
    &lt;ul&gt;
      &lt;li&gt;docker is one of the supported run-time&lt;/li&gt;
      &lt;li&gt;and currently the only one officially&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;documentation is sub par but Slack and Stackoverflow community is very active&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/LICENSE&quot;&gt;apache license&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubernetes/LICENSE at master · kubernetes/kubernetes · GitHub&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GFW, Aliyun repo: &lt;code class=&quot;highlighter-rouge&quot;&gt;registry.cn-hangzhou.aliyuncs.com/google_containers&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;quarterly release cycle&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;history&quot;&gt;History&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;originated from Google internal project Borg (now called Omega)&lt;/li&gt;
  &lt;li&gt;open sourced in 2014&lt;/li&gt;
  &lt;li&gt;1.0: July 2015&lt;/li&gt;
  &lt;li&gt;graduated from CNCF (first project to do so) in March 2018&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;terminologies&quot;&gt;Terminologies&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;node
    &lt;ul&gt;
      &lt;li&gt;a worker machine in k8s&lt;/li&gt;
      &lt;li&gt;also called minion&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;pod
    &lt;ul&gt;
      &lt;li&gt;a smallest deployable unit&lt;/li&gt;
      &lt;li&gt;logical collection of containers that belong to an application&lt;/li&gt;
      &lt;li&gt;containers that &lt;strong&gt;should&lt;/strong&gt; go hand in hand together as if they were in
a single physical host&lt;/li&gt;
      &lt;li&gt;has single shared unique &lt;strong&gt;dynamic&lt;/strong&gt; virtual IP&lt;/li&gt;
      &lt;li&gt;shared volume&lt;/li&gt;
      &lt;li&gt;most of the time it has a single container&lt;/li&gt;
      &lt;li&gt;think of it as a way of running multiple processes with container&lt;/li&gt;
      &lt;li&gt;share
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-net=container:bla&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-ipc=container:bla&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;volume&lt;/li&gt;
          &lt;li&gt;PID name space&lt;/li&gt;
          &lt;li&gt;time namespace&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;there is a &lt;code class=&quot;highlighter-rouge&quot;&gt;pause&lt;/code&gt; container that holds the network namespace for all other
containers that has separate life cycle
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/33472741/what-work-does-the-process-in-container-gcr-io-google-containers-pause0-8-0-d&quot;&gt;so&lt;/a&gt;
            &lt;ul&gt;
              &lt;li&gt;docker - What work does the process in container &quot;gcr.io/google_containers/pause:0.8.0&quot; do? - Stack Overflow&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;replica set
    &lt;ul&gt;
      &lt;li&gt;in terms of pods&lt;/li&gt;
      &lt;li&gt;k8s maintain user specified number of pods in a set&lt;/li&gt;
      &lt;li&gt;kill or add pod when necessary&lt;/li&gt;
      &lt;li&gt;replaces replication controller&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;replication controller
    &lt;ul&gt;
      &lt;li&gt;takes care of one or more pods&lt;/li&gt;
      &lt;li&gt;make sure of the correct number of pods are running&lt;/li&gt;
      &lt;li&gt;this is an k8s object that’s injected into the cluster, not a daemon like
kubelet&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;deployments
    &lt;ul&gt;
      &lt;li&gt;declarative update for pods/replica set&lt;/li&gt;
      &lt;li&gt;describe only desired state&lt;/li&gt;
      &lt;li&gt;image, cpu, mem, envar&lt;/li&gt;
      &lt;li&gt;it’s like app configuration&lt;/li&gt;
      &lt;li&gt;uses replication set&lt;/li&gt;
      &lt;li&gt;deployment file are pretty much like docker compose file&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Deployment -&amp;gt; Replica Set -&amp;gt; Pod(s)&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;RS gets automatically created&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apiVersion: extensions/v1beta1&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: Deployment&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;higher level concepts than replication set&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Deployment.spec.revisionHistoryLimit: 100&lt;/code&gt; asks to store 100 history
        &lt;ul&gt;
          &lt;li&gt;default is 10&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;service
    &lt;ul&gt;
      &lt;li&gt;abstraction on top of pod&lt;/li&gt;
      &lt;li&gt;provides single static virtual IP and DNS name&lt;/li&gt;
      &lt;li&gt;provides load balancing&lt;/li&gt;
      &lt;li&gt;a named load balancer&lt;/li&gt;
      &lt;li&gt;can be exposed both externally and internally to the cluster&lt;/li&gt;
      &lt;li&gt;can also expose non-k8s endpoints&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;label
    &lt;ul&gt;
      &lt;li&gt;key/value pair attached to an object, such as pod&lt;/li&gt;
      &lt;li&gt;used to group pods, etc&lt;/li&gt;
      &lt;li&gt;values are restricted to &lt;code class=&quot;highlighter-rouge&quot;&gt;[a-zA-Z0-9]-_&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;annotation doesn’t have such restriction&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;selector
    &lt;ul&gt;
      &lt;li&gt;the other side of label&lt;/li&gt;
      &lt;li&gt;can be used to search for pod, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;namespace
    &lt;ul&gt;
      &lt;li&gt;total separation of environments&lt;/li&gt;
      &lt;li&gt;e.g &lt;code class=&quot;highlighter-rouge&quot;&gt;staging&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;production&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;kubernetes has an implicit assumption that all the state that is shared
between service instances (e.g. a Mongo cluster that stores user profiles) is
managed outside of Kubernetes.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://opensource.com/business/14/12/containers-microservices-and-orchestrating-whole-symphony&quot;&gt;from here&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;components&quot;&gt;Components&lt;/h1&gt;
&lt;h2 id=&quot;cluster-components&quot;&gt;Cluster Components&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;master
    &lt;ul&gt;
      &lt;li&gt;manages a number of nodes&lt;/li&gt;
      &lt;li&gt;HA is available&lt;/li&gt;
      &lt;li&gt;runs API server, scheduler, and controllers&lt;/li&gt;
      &lt;li&gt;scheduler decides where a pod goes into the cluster&lt;/li&gt;
      &lt;li&gt;essentially it’s just a node running master processes&lt;/li&gt;
      &lt;li&gt;typically doesn’t run pods&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;node
    &lt;ul&gt;
      &lt;li&gt;also called minion&lt;/li&gt;
      &lt;li&gt;manages pods, volume, secretes, etc&lt;/li&gt;
      &lt;li&gt;health check&lt;/li&gt;
      &lt;li&gt;proxy for port forwarding, etc&lt;/li&gt;
      &lt;li&gt;runs kubelet, kube-proxy and things like fluentd&lt;/li&gt;
      &lt;li&gt;also runs optional addons like dns, dashboard UI&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;software-components&quot;&gt;Software Components&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;etcd
    &lt;ul&gt;
      &lt;li&gt;lightweight key-value data store&lt;/li&gt;
      &lt;li&gt;distributed database&lt;/li&gt;
      &lt;li&gt;can be configured to form a cluster automatically&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;API Server
    &lt;ul&gt;
      &lt;li&gt;serves kubernets API over HTTP+JSON&lt;/li&gt;
      &lt;li&gt;kubernetes API&lt;/li&gt;
      &lt;li&gt;extension API&lt;/li&gt;
      &lt;li&gt;autoscaling API&lt;/li&gt;
      &lt;li&gt;batch API&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;scheduler
    &lt;ul&gt;
      &lt;li&gt;monitors resource and decide which pod runs on which node&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;controller manager
    &lt;ul&gt;
      &lt;li&gt;makes sure the current status matches user’s desire&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;kubelet
    &lt;ul&gt;
      &lt;li&gt;runs on nodes, drives pod stat towards desired one&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;kube-proxy
    &lt;ul&gt;
      &lt;li&gt;&lt;em&gt;Communication between pods in Kubernetes is managed by the Service resource. By default, this resource creates a virtual IP address: the ClusterIP. When a pod decides it wants to talk to another service, DNS returns the cluster IP of this service. As the pod tries to connect to the cluster IP, iptables on the local node has been configured to pick a destination pod IP address randomly. kube-proxy is in charge of configuring iptables on each node in the cluster and does this whenever a service is changed, a pod starts or stops. These changes happen on every node and because of iptables implementation details are extremely expensive.&lt;/em&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;https://linkerd.io/2020/02/17/architecting-for-multicluster-kubernetes/&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;forward network traffic looking for cluster IP service to their endpoint&lt;/li&gt;
      &lt;li&gt;runs on every node&lt;/li&gt;
      &lt;li&gt;network proxy and load-balancer&lt;/li&gt;
      &lt;li&gt;monitors API from master&lt;/li&gt;
      &lt;li&gt;uses virtual IP and &lt;code class=&quot;highlighter-rouge&quot;&gt;iptables&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;at one stage it was a real proxy that packets pass through&lt;/li&gt;
      &lt;li&gt;userspace mode -&amp;gt; iptable -&amp;gt; moved on to use ipvs&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/debug-application-cluster/debug-service/#is-the-kube-proxy-working&quot;&gt;debug kube proxy&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;with iptable rule examples&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SVC-*&lt;/code&gt; rule and &lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SEP-*&lt;/code&gt; rule&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2019/03/29/kube-proxy-subtleties-debugging-an-intermittent-connection-reset/&quot;&gt;k8s blog, 2019, bug&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;a war story about a bug, with clear explanation of iptables programmed by kube-proxy&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SERVICES&lt;/code&gt; - entrypoin, points to &lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SVC&lt;/code&gt; chain&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SVC-*&lt;/code&gt; chain - one per clusterIP service, load balanced to &lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SEP-*&lt;/code&gt; chain&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE-SEP-*&lt;/code&gt; chain - one per service endpoint, simple DNAT&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://prefetch.net/blog/2018/02/09/understanding-the-network-plumbing-that-makes-kubernetes-pods-and-services-work/&quot;&gt;prefetch&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;with actual iptable chain examples&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/07/09/ipvs-based-in-cluster-load-balancing-deep-dive/&quot;&gt;ipvs, k8s.io, 2018&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;iptable is a bottle neck for scaling&lt;/li&gt;
          &lt;li&gt;ipvs uses hash table that scales much better&lt;/li&gt;
          &lt;li&gt;scheduler can be configured: round robin, destination hashing, etc&lt;/li&gt;
          &lt;li&gt;there is actually a &lt;code class=&quot;highlighter-rouge&quot;&gt;kube-ipvs0&lt;/code&gt; dummy device that has the cluster IP&lt;/li&gt;
          &lt;li&gt;one IPVS virtual server per service IP&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ipvsadm -ln&lt;/code&gt; &lt;a href=&quot;https://gist.github.com/674e275a47d4328befe24a666edd045c&quot;&gt;gist&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/command-line-tools-reference/kube-proxy/&quot;&gt;cli, reference&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;kube-proxy command line reference&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://arthurchiao.github.io/blog/cracking-k8s-node-proxy/&quot;&gt;chiao, detail&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;strong&gt;Cracking kubernetes node proxy (aka kube-proxy)&lt;/strong&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;cAdvisor
    &lt;ul&gt;
      &lt;li&gt;monitoring agent&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl proxy&lt;/code&gt; &amp;amp;&amp;amp; GET &lt;code class=&quot;highlighter-rouge&quot;&gt;/api/v1/nodes/${1}/proxy/metrics/cadvisor&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;arch&quot;&gt;Arch&lt;/h2&gt;
&lt;h3 id=&quot;high-level-architecture&quot;&gt;High Level Architecture&lt;/h3&gt;
&lt;p&gt;&amp;lt;img alt=”arch” src=”http://k8s.info/resources/cheatsheet/k8s-cheatsheet-physical-layout.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h3 id=&quot;2&quot;&gt;2&lt;/h3&gt;
&lt;p&gt;&amp;lt;img alt=”another arch” src=”http://cythumb.cyworld.com/810x0/c2down.cyworld.co.kr/download?fid=64224fe7c9ab420678b250019c2ac900&amp;amp;name=2015_09_25_kubernetes_architecture_with_flannel.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h3 id=&quot;3&quot;&gt;3&lt;/h3&gt;
&lt;p&gt;&amp;lt;img alt=”black and white” src=”http://blog.octo.com/wp-content/uploads/2017/01/architecturenormal-1024x843.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h3 id=&quot;with-edge-router&quot;&gt;with edge router&lt;/h3&gt;
&lt;p&gt;&amp;lt;img src=”https://cdn-images-1.medium.com/max/1600/1*_ArjfIk34Op6qQWoYCPhOA.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h1 id=&quot;functionality&quot;&gt;Functionality&lt;/h1&gt;

&lt;h2 id=&quot;ring-graph&quot;&gt;Ring Graph&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://borlandc.pek3b.qingstor.com/k8s/k8s-rings.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;health-check&quot;&gt;Health check&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;liveness probe checks if the container is broken and should be restarted
    &lt;ul&gt;
      &lt;li&gt;this is only necessary if the application is &lt;strong&gt;not&lt;/strong&gt; able to crash itself.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;readiness probe
    &lt;ul&gt;
      &lt;li&gt;check if the service is ready, e.g. depending service like mysql, redis, are ready&lt;/li&gt;
      &lt;li&gt;k8s will only send traffic to the pod if it’s ready&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;both probes are periodical&lt;/li&gt;
  &lt;li&gt;both support three types of diagnose: http, tcp and command line&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;deploymentspec.restartPolicy&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;values can be &lt;code class=&quot;highlighter-rouge&quot;&gt;Always&lt;/code&gt; (default), &lt;code class=&quot;highlighter-rouge&quot;&gt;OnFailure&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;Never&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;applies to all containers&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ianlewis.org/en/using-kubernetes-health-checks&quot;&gt;article by ianlewis&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/virtuslab/think-twice-before-using-helm-25fbb18bc822&quot;&gt;think twice before using helm&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;composing&quot;&gt;Composing&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;pod definition in YAML&lt;/li&gt;
  &lt;li&gt;also possible to use JSON&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;configuration-management&quot;&gt;Configuration Management&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;config map and secretes&lt;/li&gt;
  &lt;li&gt;secretes can be accessed from volume files or environment variable&lt;/li&gt;
  &lt;li&gt;updated secretes are NOT handled automatically&lt;/li&gt;
  &lt;li&gt;ConfigMaps are meant for non-secure informations
    &lt;ul&gt;
      &lt;li&gt;can support JSON blobs and entire files&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ConfigMaps can be used as
    &lt;ul&gt;
      &lt;li&gt;envvar&lt;/li&gt;
      &lt;li&gt;file in volume
        &lt;ul&gt;
          &lt;li&gt;automatically updated but it takes a while&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;docker run command line&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.giantswarm.io/understanding-basic-kubernetes-concepts-iv-secrets-and-configmaps/&quot;&gt;giantswarm&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzI4NDYxOTgwMw==&amp;amp;mid=2247483735&amp;amp;idx=1&amp;amp;sn=5b7479abd4d0f087bf8f5459d4a6333a&amp;amp;chksm=ebf9e423dc8e6d35a57fb36df2e4499c5d28f90ba76625ca338e8775a5246e6ee9eb3bb4adf0&amp;amp;mpshare=1&amp;amp;scene=1&amp;amp;srcid=0413rcM3LonF0Za813KVw1Yw&amp;amp;key=c006b033843dca2ee6bc8cc04ddeb9e55487b95915484e764697c4c94ce622bd9f6ca3888575d511b9e1b85ecdaa1debef744509477167c6b052de4105b0754bac7776773f686e99e9d97386ca684c8d&amp;amp;ascene=0&amp;amp;uin=MjIxNDYyOTkwMg%3D%3D&amp;amp;&quot;&gt;k8s技术社区&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;service&quot;&gt;Service&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;session affinity can be specified in service &lt;code class=&quot;highlighter-rouge&quot;&gt;spec&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.sessionAffinity&lt;/code&gt;, value can be &lt;code class=&quot;highlighter-rouge&quot;&gt;ClientIP&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;None&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;generates separate iptable run from kube-proxy&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;when a service is created without selectors, the &lt;code class=&quot;highlighter-rouge&quot;&gt;Endpoints&lt;/code&gt; object is not
going to be created and has to be defined by the user
    &lt;ul&gt;
      &lt;li&gt;suitable for defining external services&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;service handles layer 4 routing, while ingress handles layer 7&lt;/li&gt;
  &lt;li&gt;service can expose more than one port
    &lt;ul&gt;
      &lt;li&gt;each port shoud be named in this case&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;service can be discovered by environment variable
    &lt;ul&gt;
      &lt;li&gt;when a new pod is created, existing service will be available in the pod
via envar&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;XXX_SERVICE_HOST&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;XXX_SERVICE_PORT&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;service can also be discovered by DNS&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;service-types&quot;&gt;Service types&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ClusterIP&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;this is the default type&lt;/li&gt;
      &lt;li&gt;enable pod to pod communication&lt;/li&gt;
      &lt;li&gt;provides service discovery&lt;/li&gt;
      &lt;li&gt;provides DNS&lt;/li&gt;
      &lt;li&gt;only accessible from inside the cluster&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;None&lt;/code&gt;: for &lt;strong&gt;headless&lt;/strong&gt; service&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;&quot;&lt;/code&gt;: automatic assigned from a special IP segment&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;x.x.x.x&lt;/code&gt;: pre-allocated IP&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodePort&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;a port on a node&lt;/li&gt;
      &lt;li&gt;externally exposed service&lt;/li&gt;
      &lt;li&gt;once exposed, the port is available on all nodes&lt;/li&gt;
      &lt;li&gt;builds on top of cluster ip and route request from all nodes on that port&lt;/li&gt;
      &lt;li&gt;can be specified by user, default is automatic
        &lt;ul&gt;
          &lt;li&gt;default automatic range is 30000-32767, user configurable&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;LoadBalancer&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;external IP acting as a load balancer&lt;/li&gt;
      &lt;li&gt;actual load balancer provided by the &lt;strong&gt;cloud provider&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;builds on top of &lt;code class=&quot;highlighter-rouge&quot;&gt;NodePort&lt;/code&gt; and creates an load balancer&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;type: LoadBalancer&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl expose --type=LoadBalancer&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ExternalName&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;DNS alias for external services&lt;/li&gt;
      &lt;li&gt;this doesn’t involve &lt;code class=&quot;highlighter-rouge&quot;&gt;kube-proxy&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;no port or endpoint is defined&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;my-service.prod.svc.CLUSTER&lt;/code&gt; points to name in &lt;code class=&quot;highlighter-rouge&quot;&gt;spec.my.database.example.com&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;add an CNAME record into kube-dns&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;headless-service&quot;&gt;Headless service&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;service with &lt;code class=&quot;highlighter-rouge&quot;&gt;ClusterIP&lt;/code&gt; set to &lt;code class=&quot;highlighter-rouge&quot;&gt;None&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;no IP will be configured and thus no iptable rules will be created&lt;/li&gt;
  &lt;li&gt;DNS entries are added depending on whether there is selector or not&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;deployment&quot;&gt;Deployment&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.strategy&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;controls upgrade strategy&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.type&lt;/code&gt;: &lt;code class=&quot;highlighter-rouge&quot;&gt;Recreate&lt;/code&gt;  or &lt;code class=&quot;highlighter-rouge&quot;&gt;RollingUpdate&lt;/code&gt; (default)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl rollout status deploy/foo&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;check rollout status&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl rollout history deploy/foo&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;check rollout history&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl rollout undo deploy/foo&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;rollback to previous version&lt;/li&gt;
      &lt;li&gt;can also rollback to a specific version with e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;--to-version=2&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;a rollout is triggered when part of &lt;code class=&quot;highlighter-rouge&quot;&gt;.spec.template&lt;/code&gt; is modified&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;daemonset&quot;&gt;DaemonSet&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;ensure that a pod is available on selected nodes&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;RestartPolicy&lt;/code&gt; has to be &lt;code class=&quot;highlighter-rouge&quot;&gt;Always&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.nodeSelector&lt;/code&gt; can be used to select node&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;jobs&quot;&gt;Jobs&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: Job&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;pods that run for a while and stop and not to be restarted&lt;/li&gt;
  &lt;li&gt;3 kinds
    &lt;ul&gt;
      &lt;li&gt;non-parallel jobs&lt;/li&gt;
      &lt;li&gt;parallel jobs with a fixed completion count &lt;code class=&quot;highlighter-rouge&quot;&gt;spec.completions&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;controls how many completions is desired&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;parallel jobs with a work queue: &lt;code class=&quot;highlighter-rouge&quot;&gt;spec.parallelism&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;controls number of pod running at the same time&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;cronjob&quot;&gt;CronJob&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: CronJob&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.schedule: &quot;*/1 * * * *&quot;&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;available from 1.5+&lt;/li&gt;
  &lt;li&gt;API server has to be started with &lt;code class=&quot;highlighter-rouge&quot;&gt;--runtime-config=batch/v2alpha1=true&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;init-containers&quot;&gt;Init Containers&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;a feature added in 1.5&lt;/li&gt;
  &lt;li&gt;within a pod, a set of containers can be specified to run before the app containers.&lt;/li&gt;
  &lt;li&gt;different to regular containers
    &lt;ul&gt;
      &lt;li&gt;run to completion&lt;/li&gt;
      &lt;li&gt;runs one after another&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;metadata.annotation.pod.beta.kubernetes.io/init-containers&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;1.5 +&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.initContainers&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;1.6 +&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;lifecycle-hooks&quot;&gt;Lifecycle Hooks&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;postStart&lt;/code&gt; in container spec
    &lt;ul&gt;
      &lt;li&gt;called right after container creation&lt;/li&gt;
      &lt;li&gt;blocking all following operations&lt;/li&gt;
      &lt;li&gt;no gurantee that it’ll be triggered before &lt;code class=&quot;highlighter-rouge&quot;&gt;ENTRYPOINT&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;no parameter&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;preStop&lt;/code&gt; in container spec
    &lt;ul&gt;
      &lt;li&gt;blocking, stop only happens when hook handler returns&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;hook handler can be
    &lt;ul&gt;
      &lt;li&gt;shell script: &lt;code class=&quot;highlighter-rouge&quot;&gt;exec&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;HTTP: &lt;code class=&quot;highlighter-rouge&quot;&gt;httpGet&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;hooks are delivered at least once&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openshift.com/kubernetes-pods-life/&quot;&gt;openshift&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;blog about pod lifecycle&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;affinity&quot;&gt;Affinity&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.nodeSelector&lt;/code&gt; provides simple way of scheduling pods on host&lt;/li&gt;
  &lt;li&gt;node affinity introduced in 1.2, rather flexible syntax allowed&lt;/li&gt;
  &lt;li&gt;inter-pod affinity introduced in 1.4&lt;/li&gt;
  &lt;li&gt;can be
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;nodeAffinity&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;podAffinity&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;podAntiAffinity&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;there is no &lt;code class=&quot;highlighter-rouge&quot;&gt;nodeAntiAffinity&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.affinity.nodeAffinity&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;preferredDuringSchedulingIgnoredDuringExecution&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;for preferred, &lt;code class=&quot;highlighter-rouge&quot;&gt;weight&lt;/code&gt; is required&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;operator supported
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;In&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NotIn&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Exists&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;DoesNotExists&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Gt&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Lt&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;taint-and-toleration&quot;&gt;Taint and toleration&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;related to node/pod affinity&lt;/li&gt;
  &lt;li&gt;taint roughly means &lt;em&gt;mark&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl taint nodes node1 key=value:NoSchedule&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;pod cannot be scheduled on this node &lt;code class=&quot;highlighter-rouge&quot;&gt;node1&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;unless there is a toleration that matches the KV pair and effect
&lt;code class=&quot;highlighter-rouge&quot;&gt;NoSchedule&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;effect
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NoSchedule&lt;/code&gt; no pod will be scheduled&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;PreferNoSchedule&lt;/code&gt; same as above but soft&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NoExecute&lt;/code&gt; evict pod from node&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;toleration is declared inside a &lt;strong&gt;pod spec&lt;/strong&gt; to make exception to the above rule
    &lt;ul&gt;
      &lt;li&gt;key&lt;/li&gt;
      &lt;li&gt;value&lt;/li&gt;
      &lt;li&gt;operation: &lt;code class=&quot;highlighter-rouge&quot;&gt;Exists, Equal&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;effect&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;statefulset&quot;&gt;StatefulSet&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;mimics virtual machine
    &lt;ul&gt;
      &lt;li&gt;stable, unique network ID:
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;{statefulset-name}-{ordinal}&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;each pod gets: &lt;code class=&quot;highlighter-rouge&quot;&gt;podname.headless_service_name&lt;/code&gt; as DNS&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;stable, persistent storage&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;stable&lt;/strong&gt; means persistence across pod reschedule&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;used to be called &lt;strong&gt;PetSets&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;beta from 1.5&lt;/li&gt;
  &lt;li&gt;includes
    &lt;ul&gt;
      &lt;li&gt;a headless service that controls the domain &lt;code class=&quot;highlighter-rouge&quot;&gt;$svc.$ns.svc.cluster.local&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;stateful set, the application itself, e.g. nginx&lt;/li&gt;
      &lt;li&gt;volume claim templates, each replicate will have its own PVC&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;meant for service with
    &lt;ul&gt;
      &lt;li&gt;a pre-defined cluster size&lt;/li&gt;
      &lt;li&gt;network attached shared storage&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;replicas will be brought up one after another: &lt;code class=&quot;highlighter-rouge&quot;&gt;{0 ... N-1}&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;deletion reverses the order&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;nodes can communicate with one another through stable network names
    &lt;ul&gt;
      &lt;li&gt;point of the headless service&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;can be scaled through hpa
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://raw.githubusercontent.com/janakiramm/wp-statefulset/master/wordpress.yml&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;how successful this operation is depends on the actual application that’s 
being scaled&lt;/li&gt;
      &lt;li&gt;when scaling down, the pvc and pv won’t be removed, so that when it’s
scaled up again, they’ll be reused, retaining the data&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;each pod
    &lt;ul&gt;
      &lt;li&gt;has stable hostname &lt;code class=&quot;highlighter-rouge&quot;&gt;statefullsetname-ordinal&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;has &lt;code class=&quot;highlighter-rouge&quot;&gt;$podname.$service-name&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;leadership select can thus be performed&lt;/li&gt;
  &lt;li&gt;data on pvc will be retained even if the set is scaled down or deleted&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.serviceName&lt;/code&gt; must point to the headless that pre-exists
    &lt;ul&gt;
      &lt;li&gt;pod get DNS entry like &lt;code class=&quot;highlighter-rouge&quot;&gt;pod-specific-string.serviceName.default.svc.cluster.local&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;terminationGracePeriodSeconds&lt;/code&gt; cannot be 0&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.kubernetes.io/2016/12/statefulset-run-scale-stateful-applications-in-kubernetes.html&quot;&gt;blog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Yolean/kubernetes-mysql-cluster&quot;&gt;mysql&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;github repo for running mysql cluster&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://thenewstack.io/deploy-highly-available-wordpress-instance-statefulset-kubernetes-1-5/&quot;&gt;newstack&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;deploying wordpress with statefulset and pv&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://raw.githubusercontent.com/cockroachdb/cockroach/master/cloud/kubernetes/cockroachdb-statefulset.yaml&quot;&gt;cockroach&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;example deploy&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;configmap&quot;&gt;ConfigMap&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;config can be exported to
    &lt;ul&gt;
      &lt;li&gt;envar&lt;/li&gt;
      &lt;li&gt;command line argument&lt;/li&gt;
      &lt;li&gt;config file in volume&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;creation
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl create configmap my-config&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--from-literal=literal-key=literal-value&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--from-file=ui.properties&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--from-file=path/to/config/dir&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;consumption
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;valueFrom: {configMapKeyRef: bla}&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;volumes[].configMap&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;namespace&quot;&gt;Namespace&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;by default, there are 2: &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;kube-system&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;one can create new namespaces with YAML file (&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: Namespace&lt;/code&gt;)
    &lt;ul&gt;
      &lt;li&gt;or directly with &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl create ns&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl config set-context &amp;lt;context&amp;gt; --namespace=test&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;sets the current namespace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl create -f foo.yaml --namespace wisebuild&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;create objetcs inside a namespace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;namespace can also be specified in YAML files&lt;/li&gt;
  &lt;li&gt;namespace cannot be nested&lt;/li&gt;
  &lt;li&gt;network is not firewalled between namespaces&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;dns&quot;&gt;DNS&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;service-name&amp;gt;.&amp;lt;namespace-name&amp;gt;.svc.cluster.local&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;name must be DNS-1035 valid: &lt;code class=&quot;highlighter-rouge&quot;&gt;'[a-z]([-a-z0-9]*[a-z0-9])?&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;this applies only to service and not pod or deployment&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;hostname.subdomain.namespace.svc.....&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pod.spec.hostname&lt;/code&gt; over &lt;code class=&quot;highlighter-rouge&quot;&gt;pod.metadata.name&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl run --generator=run-pod/v1 tmp-shell --rm -i --tty --image nicolaka/netshoot -- /bin/bash&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;handy command to run netshoot&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ingress&quot;&gt;Ingress&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;an Ingress is a collection of rules that allow inbound connections to reach the cluster &lt;strong&gt;services&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;internet ==&amp;gt; Ingress ==&amp;gt; Services&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;benefits:
    &lt;ul&gt;
      &lt;li&gt;virtual domain&lt;/li&gt;
      &lt;li&gt;TLS termination&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;requires a ingress controller to be deployed on the master node&lt;/li&gt;
  &lt;li&gt;a ingress controller:
    &lt;ul&gt;
      &lt;li&gt;is a reverse proxy that’s kubernetes aware&lt;/li&gt;
      &lt;li&gt;watches creation/update/deletion of rules&lt;/li&gt;
      &lt;li&gt;configure itself accordingly&lt;/li&gt;
      &lt;li&gt;not part of &lt;code class=&quot;highlighter-rouge&quot;&gt;kube-controller-manager&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;officially nginx controller is supported as well as GCE&lt;/li&gt;
      &lt;li&gt;requires default backend for ingress&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ingress resource
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: Ingress&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.rules&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;multple ingress controller can run in parallel
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;annotations:&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubernetes.io/ingress.class: &quot;gce&quot;&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/ingress/blob/master/controllers/nginx/README.md&quot;&gt;nginx ingress controller&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;receive events from k8s and update config file&lt;/li&gt;
      &lt;li&gt;reload configuration when needed&lt;/li&gt;
      &lt;li&gt;borrows stuff from openresty&lt;/li&gt;
      &lt;li&gt;customizable from annotation&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;philosophy&quot;&gt;Philosophy&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;https://pbs.twimg.com/media/DZVaE83U8AAMyqh.jpg&quot; width=&quot;75%&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;links&quot;&gt;Links&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.traefik.io/user-guide/kubernetes/&quot;&gt;traffik&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;official user guide for traffik&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://hackernoon.com/kubernetes-ingress-controllers-and-traefik-a32648a4ae95&quot;&gt;hackernoon&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;pratical article of using trafik as a ingress controller&lt;/li&gt;
      &lt;li&gt;deploying trafik only on &lt;strong&gt;edge router&lt;/strong&gt; nodes is a nice idea&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://crondev.com/kubernetes-nginx-ingress-controller/&quot;&gt;crondev&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;nginx controller&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/ingress-nginx/blob/master/deploy/README.md&quot;&gt;deploy&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;official deploy document&lt;/li&gt;
      &lt;li&gt;on baremetal, it’s a deployment with nodeport&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://speakerdeck.com/thockin/sig-network-deep-dive-kubecon-eu-2019?slide=33&quot;&gt;speakerdeck, ingress, dns, ipv6, thockin&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;SIG-Network Deep-Dive, KubeCon EU 2019&lt;/li&gt;
      &lt;li&gt;a large part of it is what’s wrong with current ingress and how to fix them.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;downward-api&quot;&gt;Downward API&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;mechanism to expose pod level information to container&lt;/li&gt;
  &lt;li&gt;info can be exposed to
    &lt;ul&gt;
      &lt;li&gt;envar&lt;/li&gt;
      &lt;li&gt;volume file&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;envar
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;env.valueFrom.fieldRef&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;fieldPath: spec.nodeName&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;fieldPath: metadata.namespace&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;autoscaling&quot;&gt;Autoscaling&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;HPA&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: HorizontalPodAutoscaler&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; can specify policies directly&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get hpa&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;seems to only support CPU at the moment&lt;/li&gt;
  &lt;li&gt;require &lt;strong&gt;heapster&lt;/strong&gt; for collecting metrics
    &lt;ul&gt;
      &lt;li&gt;in turn requires storage solution like influxdb&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;admission-webhook&quot;&gt;Admission Webhook&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;hook for customized logic on job admission
    &lt;ul&gt;
      &lt;li&gt;job filtering (reject/allow)&lt;/li&gt;
      &lt;li&gt;object injection&lt;/li&gt;
      &lt;li&gt;mutation - modify object&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;two types: &lt;code class=&quot;highlighter-rouge&quot;&gt;MutatingAdmissionWebhook&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;ValidatingAdmissionWebhook&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;just a basic HTTP server that works with a particular API
    &lt;ul&gt;
      &lt;li&gt;has to be TLS enabled so preparing certs is a pain&lt;/li&gt;
      &lt;li&gt;k8s API server uses CA bundle to access secure webhooks server&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;configured through:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ValidatingWebhookConfiguration&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;MutatingWebhookConfiguration&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;different from initializer&lt;/li&gt;
  &lt;li&gt;usage:
    &lt;ul&gt;
      &lt;li&gt;mutate resource before creating them&lt;/li&gt;
      &lt;li&gt;automatic provisioning of storage class&lt;/li&gt;
      &lt;li&gt;validation&lt;/li&gt;
      &lt;li&gt;namespace restriction&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;debug
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kc describe rs ....&lt;/code&gt; can see something&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/ibm-cloud/diving-into-kubernetes-mutatingadmissionwebhook-6ef3c5695f74&quot;&gt;ibm&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Diving into Kubernetes MutatingAdmissionWebhook – IBM Cloud – Medium&lt;/li&gt;
      &lt;li&gt;nice diagram&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/v1.9.0/pkg/apis/admission/types.go&quot;&gt;actual api&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/morvencao/kube-mutating-webhook-tutorial&quot;&gt;github&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;mutating tutorial code&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/tree/release-1.9/test/images/webhook&quot;&gt;github&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;official test/sample code in 1.9 release&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/istio/istio/tree/master/pilot/pkg/kube/inject&quot;&gt;istio&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;where istio injects its own sidecar&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://banzaicloud.com/blog/k8s-admission-webhooks/&quot;&gt;banzaicloud&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;blog post about using admission hooks&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/slok/kubewebhook&quot;&gt;kubewebhooklok&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Go framework that makes creating a hook easier&lt;/li&gt;
      &lt;li&gt;makes writing webhook very easy but … the hard part is preparing certs&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;API and CLI&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;v1beta.AdmissionReview&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;v1beta1.AdmissionResponse&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;admissionregistration.k8s.io/v1beta1&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kc delete mutatingWebhookConfiguration&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;flow-from-banzai-cloud&quot;&gt;Flow (from Banzai Cloud)&lt;/h2&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/k8s/k8s-webhooks.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;initialiser&quot;&gt;Initialiser&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;can’t be used for &lt;code class=&quot;highlighter-rouge&quot;&gt;DELETE&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/ibm-cloud/kubernetes-initializers-deep-dive-and-tutorial-3bc416e4e13e&quot;&gt;ibm&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ahmet.im/blog/initializers/&quot;&gt;ahmet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;networking&quot;&gt;Networking&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;three networks
    &lt;ul&gt;
      &lt;li&gt;infra network that connects nodes&lt;/li&gt;
      &lt;li&gt;service network: pure virtual network, handled by firewall rules&lt;/li&gt;
      &lt;li&gt;pod network&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;each pod has its own IP address
    &lt;ul&gt;
      &lt;li&gt;This is a balanced design between IP per host and IP per container&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;no NAT allowed between containers or containers and node (minion)&lt;/li&gt;
  &lt;li&gt;kubernetes has the concept of cloud provider, which handles
    &lt;ul&gt;
      &lt;li&gt;load balancing&lt;/li&gt;
      &lt;li&gt;routes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;in general, two ways of achieving connectivity
    &lt;ul&gt;
      &lt;li&gt;overlay&lt;/li&gt;
      &lt;li&gt;direct&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;solutions include
    &lt;ul&gt;
      &lt;li&gt;flannel&lt;/li&gt;
      &lt;li&gt;calico&lt;/li&gt;
      &lt;li&gt;romana&lt;/li&gt;
      &lt;li&gt;weave&lt;/li&gt;
      &lt;li&gt;canal = flannel + calico&lt;/li&gt;
      &lt;li&gt;open vswitch&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://machinezone.github.io/research/networking-solutions-for-kubernetes/&quot;&gt;comparison&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;compares net host, ipvlan and flannel&lt;/li&gt;
      &lt;li&gt;a bit dated&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1qCOlor16Wp5mHd6MQxB5gUEQILnijyDLIExEpqmee2k/edit#gid=0&quot;&gt;google sheet&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;large table with CNI plugins side by side&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubedex.com/kubernetes-network-plugins/&quot;&gt;kubedex&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;a lot of vendors uses Calico by default&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;cni&quot;&gt;CNI&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;invoke:
    &lt;ul&gt;
      &lt;li&gt;runtime creates network namespace&lt;/li&gt;
      &lt;li&gt;runtime checks the &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; field in JSON file and invokes the right plugin&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;a CNI plugin is responsible for:
    &lt;ol&gt;
      &lt;li&gt;insert network interface into a network namespace (e.g. container)&lt;/li&gt;
      &lt;li&gt;arrange things on the host (e.g. attach veth to a bridge)&lt;/li&gt;
      &lt;li&gt;assign IP (invoking IPAM plugin)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;IPAM plugin is separate
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/containernetworking/plugins/tree/master/plugins/ipam&quot;&gt;IPAM plugin code&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;dhcp, host-local and static&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;each plugin is implemented by a binary
    &lt;ul&gt;
      &lt;li&gt;normally the plugin binaries are installed &lt;code class=&quot;highlighter-rouge&quot;&gt;/opt/cni/bin&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;NOTE&lt;/strong&gt; that these are plugin binaries, not daemon/controller binaries like &lt;code class=&quot;highlighter-rouge&quot;&gt;flanneld&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--network-plugin=cni&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/cni/net.d&lt;/code&gt; as conf directory&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/containernetworking/cni&quot;&gt;github&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;GitHub - containernetworking/cni: Container Network Interface - networking for Linux containers&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/containernetworking/plugins&quot;&gt;plugins github&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;GitHub - containernetworking/plugins: Some standard networking plugins, maintained by the CNI team.&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; contains default plugins like bridge, macvlan, ipvlan, etc&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;meta&lt;/code&gt; contains flannel, calico, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/containernetworking/cni/blob/master/SPEC.md&quot;&gt;actual spec&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;cni/SPEC.md at master · containernetworking/cni · GitHub&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.dasblinkenlichten.com/understanding-cni-container-networking-interface/&quot;&gt;dasb&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Das Blinken Lichten · Understanding CNI (Container Networking Interface)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.dasblinkenlichten.com/using-cni-docker/&quot;&gt;dasb&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Das Blinken Lichten · Using CNI with Docker&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.altoros.com/blog/kubernetes-networking-writing-your-own-simple-cni-plug-in-with-bash/&quot;&gt;altoros&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;table&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Kubernetes Networking: How to Write Your Own CNI Plug-in with Bash&lt;/td&gt;
              &lt;td&gt;Altoros&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
      &lt;li&gt;shell script for managing bridge, subnet, allocating new IP, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;plugin can have delegate
    &lt;ul&gt;
      &lt;li&gt;the flannel plugin delegates bridge creation and IPAM to the &lt;code class=&quot;highlighter-rouge&quot;&gt;bridge&lt;/code&gt; plugin&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;plugin can be chained
    &lt;ul&gt;
      &lt;li&gt;looks like it started with CNI spec 0.3.0&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;plugins: [{type: calico}, {type: portMap}]&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;also called config list&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;plugins&quot;&gt;Plugins&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;bridge
    &lt;ul&gt;
      &lt;li&gt;find the bridge (default to &lt;code class=&quot;highlighter-rouge&quot;&gt;cni0&lt;/code&gt;)&lt;/li&gt;
      &lt;li&gt;connects both ends of veth&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;macvlan
    &lt;ul&gt;
      &lt;li&gt;a virtual device enslaved to a physical device, e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;eth0&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;WLAN device cannot be enslaved to&lt;/li&gt;
      &lt;li&gt;works with a IPAM plugin&lt;/li&gt;
      &lt;li&gt;supports a lot of different mode, defaults to &lt;code class=&quot;highlighter-rouge&quot;&gt;bridge&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;not sure what the different modes are&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ipvlan&lt;/li&gt;
  &lt;li&gt;ptp
    &lt;ul&gt;
      &lt;li&gt;point to point between container and host&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;host-device
    &lt;ul&gt;
      &lt;li&gt;move an existing device into container netns&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;loopback
    &lt;ul&gt;
      &lt;li&gt;creates the &lt;code class=&quot;highlighter-rouge&quot;&gt;lo&lt;/code&gt; device in netns&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;flannel
    &lt;ul&gt;
      &lt;li&gt;works with &lt;code class=&quot;highlighter-rouge&quot;&gt;flanneld&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;delegates to &lt;code class=&quot;highlighter-rouge&quot;&gt;bridge&lt;/code&gt; plugin&lt;/li&gt;
      &lt;li&gt;default &lt;code class=&quot;highlighter-rouge&quot;&gt;bridge&lt;/code&gt; configuration is to use &lt;code class=&quot;highlighter-rouge&quot;&gt;host-local&lt;/code&gt; IPAM&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ipam-plugins&quot;&gt;IPAM Plugins&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;host-local
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/containernetworking/cni/issues/303&quot;&gt;discussion on static IP&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;static
    &lt;ul&gt;
      &lt;li&gt;seems useless as it can only give on set of static IP&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;DHCP&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;plugin-api&quot;&gt;Plugin API&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ADD&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;INPUT: network namespace, network configuration&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;DELETE&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;VERSION&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;flannel&quot;&gt;Flannel&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;etcd backed overlay&lt;/li&gt;
  &lt;li&gt;cross host shared routing table stored in etcd&lt;/li&gt;
  &lt;li&gt;each node has its own subnet&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;flanneld&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;manages the subnet&lt;/li&gt;
      &lt;li&gt;distribute IP address for each pod&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;configuration exposed with &lt;code class=&quot;highlighter-rouge&quot;&gt;/run/flannel/subnet.env&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;on host
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cni0&lt;/code&gt; is like docker bridge that all pods connects to&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;flannel.1&lt;/code&gt; is a virtual device that wraps all data in VXLAN (if
necessary) and routes all data to &lt;code class=&quot;highlighter-rouge&quot;&gt;eth0&lt;/code&gt; on the host&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.laputa.io/kubernetes-flannel-networking-6a1cb1f8ec7c&quot;&gt;laputa&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;very detailed explaination how flannel works&lt;/li&gt;
      &lt;li&gt;container’s gateway is &lt;code class=&quot;highlighter-rouge&quot;&gt;cni0&lt;/code&gt;, packets goes to &lt;code class=&quot;highlighter-rouge&quot;&gt;cni0&lt;/code&gt; first (10.96.1.1/24)&lt;/li&gt;
      &lt;li&gt;routing rule forward the packet to &lt;code class=&quot;highlighter-rouge&quot;&gt;flannel.1&lt;/code&gt; (10.96.1.0/16)&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;flannel.1&lt;/code&gt; is a TUN device, which is a kernel virtual L2 device&lt;/li&gt;
      &lt;li&gt;all incoming/outgoing packets gets forwarded to &lt;code class=&quot;highlighter-rouge&quot;&gt;flanneld&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;flanneld&lt;/code&gt; knows how to forward/tunnel the packets to which hosts, as all &lt;code class=&quot;highlighter-rouge&quot;&gt;flanneld&lt;/code&gt; are connected to &lt;code class=&quot;highlighter-rouge&quot;&gt;etcd&lt;/code&gt; cluster where such information is stored&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;etcdctl ls /coreos.com/network/subnets&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/coreos/flannel/blob/master/Documentation/alicloud-vpc-backend.md&quot;&gt;alicloud&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;flannel alicloud VPC backend&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;calico&quot;&gt;Calico&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Layer 3 model&lt;/li&gt;
  &lt;li&gt;Uses BGP&lt;/li&gt;
  &lt;li&gt;No NATting&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;weave&quot;&gt;Weave&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Overlay networking&lt;/li&gt;
  &lt;li&gt;Compatible with both libnetwork and k8s&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;canal&quot;&gt;Canal&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;canal = calico + flannel&lt;/li&gt;
  &lt;li&gt;company behind it is called Tigera&lt;/li&gt;
  &lt;li&gt;technically it’s possible to combine networking from flannel and policy side
from calico&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.projectcalico.org/canal-tigera/&quot;&gt;news&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;kubenet-plugin&quot;&gt;kubenet plugin&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;simple plugin implementation&lt;/li&gt;
  &lt;li&gt;no cross-node networking by itself&lt;/li&gt;
  &lt;li&gt;implements: &lt;code class=&quot;highlighter-rouge&quot;&gt;cbr0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;dns-1&quot;&gt;DNS&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;services
    &lt;ul&gt;
      &lt;li&gt;each normal service has an DNS entry like &lt;code class=&quot;highlighter-rouge&quot;&gt;foo&lt;/code&gt;.
        &lt;ul&gt;
          &lt;li&gt;resolves to cluster IP of the service&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;headless service has an DNS entry like &lt;code class=&quot;highlighter-rouge&quot;&gt;foo&lt;/code&gt;.
        &lt;ul&gt;
          &lt;li&gt;resolves to IPs from all end point that’s associated with the service&lt;/li&gt;
          &lt;li&gt;client side round robin expected&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;FQDN is &lt;code class=&quot;highlighter-rouge&quot;&gt;service.namespace.svc.cluster.local&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cluster.local&lt;/code&gt; part can be configured with kubelet&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;pod
    &lt;ul&gt;
      &lt;li&gt;each pod has DNS entry like &lt;code class=&quot;highlighter-rouge&quot;&gt;1-2-3-4.default.pod.cluster.local&lt;/code&gt; where
&lt;code class=&quot;highlighter-rouge&quot;&gt;1-2-3-4&lt;/code&gt; is the IP of the POD&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.subDomain&lt;/code&gt; can be used to specify subdomain, after which,
&lt;code class=&quot;highlighter-rouge&quot;&gt;hostname.subdomain.ns.cluster.local&lt;/code&gt; is in the DNS records&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;each pod can have a &lt;code class=&quot;highlighter-rouge&quot;&gt;dnsPolicy&lt;/code&gt; defined
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Default&lt;/code&gt;: inherit configuration from node&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ClusterFirst&lt;/code&gt;: queries are sent to &lt;code class=&quot;highlighter-rouge&quot;&gt;kube-dns&lt;/code&gt; service
        &lt;ul&gt;
          &lt;li&gt;this is the default behavior&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ClusterFirstWithHostNet&lt;/code&gt; ???&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;deployed as an add-on
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/dns/README.md&quot;&gt;github md&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/resolve.conf&lt;/code&gt; adds a lot of search for k8s namespaces
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;search default.svc.cluster.local svc.cluster.local cluster.local wise2c.com&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;actual records are stored in etcd for internal resolver to query through HTTP&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dnsmasq&lt;/code&gt; handles caching of records&lt;/li&gt;
  &lt;li&gt;even if a pod is using host network, DNS resolving works as expected&lt;/li&gt;
  &lt;li&gt;it is possible to setup sub domain servers and upstream servers
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/administer-cluster/dns-custom-nameservers/&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/understanding-how-kubernetes-services-dns-work/&quot;&gt;sysdig&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;tracing DNS using sysdig&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;trouble-shooting
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pods --namespace=kube-system -l k8s-app=kube-dns&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl logs --namespace=kube-system $(kubectl get pods --namespace=kube-system -l k8s-app=kube-dns -o name) -c kubedns&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl logs --namespace=kube-system $(kubectl get pods --namespace=kube-system -l k8s-app=kube-dns -o name) -c dnsmasq&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl logs --namespace=kube-system $(kubectl get pods --namespace=kube-system -l k8s-app=kube-dns -o name) -c healthz&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/dns/blob/master/docs/specification.md&quot;&gt;spec&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubernetes DNS spec&lt;/li&gt;
      &lt;li&gt;zone is like &lt;code class=&quot;highlighter-rouge&quot;&gt;cluster.local&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dns-version TXT&lt;/code&gt; stores schema version&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;A&lt;/code&gt; record for &lt;code class=&quot;highlighter-rouge&quot;&gt;svc.ns.zone&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;for headless service, &lt;code class=&quot;highlighter-rouge&quot;&gt;svc.ns.zone&lt;/code&gt; resolves to endpiont IP&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://rsmitty.github.io/Manually-Checking-Out-KubeDNS/&quot;&gt;internal&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;what’s in the pod: etcd, kube2sky, skydns, exechealthz&lt;/li&gt;
      &lt;li&gt;where in etcd is the records&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;networking-policy&quot;&gt;Networking Policy&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;introduced in 1.3, GA in 1.7&lt;/li&gt;
  &lt;li&gt;ingress policy only as of now&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apiVersion: networking.k8s.io/v1&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind: NetworkPolicy&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.podSelector&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;pod that’s affected&lt;/li&gt;
      &lt;li&gt;empty means all&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;matchLabels&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;matchExpressions[]&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.ingress[]&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;empty means nothing is allowed&lt;/li&gt;
      &lt;li&gt;list of white listed items&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ingress[].from.podSelector&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ingress[].from.nameSpaceSelector&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ingress[].ports&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;empty or missing means all ports, i.e. not restricted&lt;/li&gt;
          &lt;li&gt;otherwise white listing&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;storage&quot;&gt;Storage&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;in k8s’ term, &lt;strong&gt;persistent&lt;/strong&gt; disk&lt;/li&gt;
  &lt;li&gt;supports:
    &lt;ul&gt;
      &lt;li&gt;docker volume&lt;/li&gt;
      &lt;li&gt;GCE disk&lt;/li&gt;
      &lt;li&gt;AWS EBS&lt;/li&gt;
      &lt;li&gt;NFS&lt;/li&gt;
      &lt;li&gt;gitrepo, clones a git repo&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;supports for cloud storage is specified as &lt;code class=&quot;highlighter-rouge&quot;&gt;spec.volumes&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;e.g &lt;code class=&quot;highlighter-rouge&quot;&gt;spec.volumes.gcePersistentDisk&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;this implies that the core kubernetes code understands the syntax&lt;/li&gt;
      &lt;li&gt;so FlexVolume might be the only option when one wants to add customized volumes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;PV reclaim policy
    &lt;ul&gt;
      &lt;li&gt;Retain, where the volume is in a released state but the data is retained and can be recovered.&lt;/li&gt;
      &lt;li&gt;Delete, where the volume is deleted.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/community/blob/master/sig-storage/volume-plugin-faq.md&quot;&gt;faq&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;k8s volume plugin FAQ&lt;/li&gt;
      &lt;li&gt;three methods:
        &lt;ol&gt;
          &lt;li&gt;in tree volume plugin&lt;/li&gt;
          &lt;li&gt;out-of-tree FlexVolume driver&lt;/li&gt;
          &lt;li&gt;out-of-tree CSI driver&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://rancher.com/blog/2018/2018-09-20-unexpected-kubernetes-part-1/?utm_campaign=Blog%202018&amp;amp;utm_content=77602215&amp;amp;utm_medium=social&amp;amp;utm_source=twitter&quot;&gt;sheng yang&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;rants about PV, PVC, StorageClass, etc by an Rancher engineer&lt;/li&gt;
      &lt;li&gt;special rants about &lt;code class=&quot;highlighter-rouge&quot;&gt;Volume&lt;/code&gt; object&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://rancher.com/blog/2018/2018-10-11-unexpected-kubernetes-part-2/&quot;&gt;part-2&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;verdict: use storage in the following order when possible:
        &lt;ul&gt;
          &lt;li&gt;use Volume when necessary (cm, secrete, etc)&lt;/li&gt;
          &lt;li&gt;use provisioner where can&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://softwareengineeringdaily.com/2019/01/11/why-is-storage-on-kubernetes-is-so-hard/&quot;&gt;software engineering daily, simsek&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;why is storage on kubernetes so hard&lt;/li&gt;
      &lt;li&gt;pretty decent summary of storage on kubernetes&lt;/li&gt;
      &lt;li&gt;CSI, rook, PV, PVC&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;volume-types&quot;&gt;Volume types&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;emptyDir&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;for scratch space&lt;/li&gt;
      &lt;li&gt;will be removed once pod is gone&lt;/li&gt;
      &lt;li&gt;use host storage by default, can be configured to use RAM&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sizeLimit&lt;/code&gt; can be used to limit its size&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;hostPath&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;similar to docker’s &lt;code class=&quot;highlighter-rouge&quot;&gt;/hostpath:/containerpath&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;given target will be created as an empty directory owned by root if it does not already exist.&lt;/li&gt;
      &lt;li&gt;? What if it already exists?&lt;/li&gt;
      &lt;li&gt;data only writable by &lt;code class=&quot;highlighter-rouge&quot;&gt;root&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;??? remove once pod is gone?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;nfs&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;iscsi&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;secret&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;persistentVolumeClaim&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.storageClassName&lt;/code&gt; what type of storage to claim&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;gitRepo&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;allow to specify git repo with commit hash&lt;/li&gt;
      &lt;li&gt;looks like this is not the &lt;a href=&quot;https://github.com/kubernetes/kubernetes/issues/17676&quot;&gt;right way&lt;/a&gt; and is deprecated&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;persistentvolume&quot;&gt;PersistentVolume&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;aka PV&lt;/li&gt;
  &lt;li&gt;it’s like a node, which means that it’s a cluster resource provided by an
admin&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;NOT&lt;/strong&gt; namespaced!!!&lt;/li&gt;
  &lt;li&gt;procedure
    &lt;ul&gt;
      &lt;li&gt;create persistent volume &lt;code class=&quot;highlighter-rouge&quot;&gt;kubctl create -f&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;create persistent volume claim, status of that volume changes to &lt;code class=&quot;highlighter-rouge&quot;&gt;BOUND&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;create pod that uses the volume&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;life-cycle
    &lt;ul&gt;
      &lt;li&gt;static volume: provisioned by admin and available all the time&lt;/li&gt;
      &lt;li&gt;dynamic volume: when &lt;code class=&quot;highlighter-rouge&quot;&gt;StorageClass&lt;/code&gt; is defined&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;volume.beta.kubernetes.io/storage-class: &quot;example-nfs&quot;&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;storage class
    &lt;ul&gt;
      &lt;li&gt;PVC can request for a certain &lt;strong&gt;class&lt;/strong&gt; of storage. E.g. google&lt;/li&gt;
      &lt;li&gt;PVC class has to match PV class for it to bound&lt;/li&gt;
      &lt;li&gt;in this case, the storage can be automatically allocated from the vendor&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;storageClassName&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;access mode
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriteOnce&lt;/code&gt; single node only, &lt;code class=&quot;highlighter-rouge&quot;&gt;R+W&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriteMany&lt;/code&gt; many nodes, &lt;code class=&quot;highlighter-rouge&quot;&gt;R+W&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ReadOnlyMany&lt;/code&gt; many nodes, &lt;code class=&quot;highlighter-rouge&quot;&gt;R&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;chapter-6&quot;&gt;Chapter 6&lt;/h3&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/k8s/pvc-provisoner-chapter6.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;spec&quot;&gt;Spec&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.volumes&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;emptyDir&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;hostPath&lt;/code&gt;, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.containers.volumeMounts&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mountPath&lt;/code&gt;: container path&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;: which volume&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;flexvolume&quot;&gt;FlexVolume&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/community/blob/master/contributors/devel/flexvolume.md&quot;&gt;github md&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;installation is by copying binary into a specific path on node
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/libexec/kubernetes/kubelet-plugins/volume/exec/&amp;lt;vendor~driver&amp;gt;/&amp;lt;driver&amp;gt;&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;or it has to be &lt;code class=&quot;highlighter-rouge&quot;&gt;/driver/driver&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;alpha from 1.2, GA from 1.8
    &lt;ul&gt;
      &lt;li&gt;supposedly replaced by CSI but k8s will &lt;a href=&quot;https://github.com/kvaps/kube-loop-flexvolume&quot;&gt;continue supports it&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;API are defined as argument to the binary &lt;code class=&quot;highlighter-rouge&quot;&gt;driver-exec &amp;lt;args&amp;gt;&lt;/code&gt;. Return of the API
should be in JSON format
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;init&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;attach&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;in: json option, node name&lt;/li&gt;
          &lt;li&gt;useful for remote volumes such as EBS&lt;/li&gt;
          &lt;li&gt;this is optional, return &lt;code class=&quot;highlighter-rouge&quot;&gt;Not supported&lt;/code&gt; in status string&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mount&lt;/code&gt;: Mount device mounts the device to a global path &lt;strong&gt;on the host&lt;/strong&gt;
which individual pods can then bind mount.
        &lt;ul&gt;
          &lt;li&gt;in: &lt;code class=&quot;highlighter-rouge&quot;&gt;mount_dir, mount device, json options&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unmount&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;detach&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;in: json option, node name&lt;/li&gt;
          &lt;li&gt;optional&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;example are under &lt;code class=&quot;highlighter-rouge&quot;&gt;git://examples/volumes/flexvolume&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://leebriggs.co.uk/blog/2017/03/12/kubernetes-flexvolumes.html&quot;&gt;leebrigg&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;nice introduction&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/rancher/rancher-flexvol&quot;&gt;rancher&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/fvigotti/cifs_k8s_plugin/blob/master/cifs.sh&quot;&gt;cifs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;dynamic-provisioning&quot;&gt;Dynamic Provisioning&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-incubator/external-storage&quot;&gt;out of tree dynamic pv&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://blog.kubernetes.io/2016/10/dynamic-provisioning-and-storage-in-kubernetes.html&quot;&gt;blog&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;storage class is global, not namespaced&lt;/li&gt;
      &lt;li&gt;PVC is namespaced&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;objects involved
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;StorageClass&lt;/code&gt; defines a new storage class backed by code
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;provisioner&lt;/code&gt; has to match the actual POD envar for the handler to
work&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-incubator/external-storage/blob/master/nfs-client/cmd/nfs-client-provisioner/provisioner.go&quot;&gt;code is here&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;PersistenVolumeClaim&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;with &lt;code class=&quot;highlighter-rouge&quot;&gt;volume.beta.kubernetes.io/storage-class&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;triggers the Pod to dynamically create a PVC&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;internal&quot;&gt;Internal&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;a controller is implemented that listens on volume creation and dynamically creates &lt;code class=&quot;highlighter-rouge&quot;&gt;v1.PersistentVolume&lt;/code&gt; objects that will be handled by k8s&lt;/li&gt;
  &lt;li&gt;it creats a provision controller and run it non stop&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;csi&quot;&gt;CSI&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Container Storage Interface&lt;/li&gt;
  &lt;li&gt;an initiative to unify the storage interface of Container Orchestrator Systems (COs) like Kubernetes, Mesos, Docker swarm, cloud foundry, etc. combined with storage vendors like Ceph, Portworx, NetApp etc&lt;/li&gt;
  &lt;li&gt;cross orchestration platform&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Bugs in volume plugins can crash critical Kubernetes components, instead of just the plugin.&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;!!!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/container-storage-interface/spec/releases/tag/v1.0.0&quot;&gt;spec 1.0&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/container-storage-interface/spec/blob/master/spec.md&quot;&gt;markdown&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2019/01/15/container-storage-interface-ga/&quot;&gt;blog, k8s&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Container Storage Interface (CSI) for Kubernetes GA&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/google-cloud/understanding-the-container-storage-interface-csi-ddbeb966a3b&quot;&gt;medium, google-cloud&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Understanding the Container Storage Interface (CSI)&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;nice colorful architecturual diagrams&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://schd.ws/hosted_files/kccnceu18/fb/CloudNativeCon%20EU%202018%20CSI%20Jie%20Yu.pdf&quot;&gt;pdf, yu jie&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://arslan.io/2018/06/21/how-to-write-a-container-storage-interface-csi-plugin/&quot;&gt;fatih, how-to&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;How to write a Container Storage Interface (CSI) plugin&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;all functions have to be idempotent&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-csi/drivers&quot;&gt;driver, github&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;https://github.com/kubernetes-csi/drivers&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;arch-1&quot;&gt;Arch&lt;/h3&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/k8s/csi-arch-1.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h3 id=&quot;api&quot;&gt;API&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;gRPC&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;service Identity&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;both node and controller plugin have to implement this&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;GetPluginInfo()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;GetPluginCapabilities()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Probe()&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;service Controller&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;controller plugin must implement this&lt;/li&gt;
      &lt;li&gt;cloud providers has to implement this&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CreateVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;DeleteVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ControllerPublishVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ControllerUnpublishVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ValidateVolumeCapabilities()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ListVolumes()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;GetCapacities()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ControllerGetCapabilities()&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;service Node&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;node plugin must implement  this&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodeStageVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodeUnstageVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodePublishVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodeUnpublishVolume()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodeGetId()&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NodeGetCapabilities()&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;api-authentication-and-authorization&quot;&gt;API Authentication and Authorization&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;API requests are tied to a user (see below) or executed anonymously&lt;/li&gt;
  &lt;li&gt;2 kinds of user: normal user and service account. service account is managed
by kubernetes, normal user is not&lt;/li&gt;
  &lt;li&gt;Authz
    &lt;ul&gt;
      &lt;li&gt;node&lt;/li&gt;
      &lt;li&gt;APAC&lt;/li&gt;
      &lt;li&gt;RBAC&lt;/li&gt;
      &lt;li&gt;Webhook&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;service-account&quot;&gt;Service Account&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;injects auth info into pods to talk to kubernetes services like the apiserver
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec.serviceAccountName&lt;/code&gt; in pod spec&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;this is a namespaced resource&lt;/li&gt;
  &lt;li&gt;as oppose to user account that’s for humans&lt;/li&gt;
  &lt;li&gt;when no service account is specified for a Pod, it’ll be default&lt;/li&gt;
  &lt;li&gt;default service account is injected into &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/run/secrets/kubernetes.io/serviceaccount&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;namespace&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ca.crt&lt;/code&gt; (the global root certificate), allows secure communication with API server&lt;/li&gt;
      &lt;li&gt;token, says who you are and what you can do&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;nice-picture&quot;&gt;Nice Picture&lt;/h3&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/k8s/k8s-service-account.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;rbac&quot;&gt;RBAC&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;role based access control&lt;/li&gt;
  &lt;li&gt;introduced in 1.6 as beta&lt;/li&gt;
  &lt;li&gt;apiserver needs to start with &lt;code class=&quot;highlighter-rouge&quot;&gt;--authorization-mode=RBAC&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;4 kinds of object defined
    &lt;ul&gt;
      &lt;li&gt;Role&lt;/li&gt;
      &lt;li&gt;ClusterRole&lt;/li&gt;
      &lt;li&gt;RoleBinding&lt;/li&gt;
      &lt;li&gt;ClusterRoleBinding&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;a &lt;strong&gt;Role&lt;/strong&gt; is a collection of permissions.
    &lt;ul&gt;
      &lt;li&gt;by default a Role is bound to a namespace&lt;/li&gt;
      &lt;li&gt;there is &lt;strong&gt;ClusterRole&lt;/strong&gt; that applies across the cluter&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;a &lt;strong&gt;RoleBinding&lt;/strong&gt; binds a role to a &lt;strong&gt;subject&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;subject can be
        &lt;ul&gt;
          &lt;li&gt;user&lt;/li&gt;
          &lt;li&gt;group&lt;/li&gt;
          &lt;li&gt;service account&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;binding can be namespaced or cluster level across namespaces&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CLI
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get clusterroles --namespace=kube-system&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.kubernetes.io/2017/04/rbac-support-in-kubernetes.html&quot;&gt;official blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;oidc-plugin&quot;&gt;OIDC Plugin&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;CLI
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--oidc-issuer-url=URL&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--oidc-client-id=ID&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--oidc-username-claim=email&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--oidc-groups-claim=groups&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/dexidp/dex/blob/master/Documentation/kubernetes.md&quot;&gt;dex, k8s&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Kubernetes authentication through dex&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links-1&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/admin/authentication/&quot;&gt;k8s auth&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://banzaicloud.com/blog/k8s-rbac/&quot;&gt;rbac, banzaicloud&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;mainly talks about LDAP RBAC integration but has nice explannation of authenticating with API server&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;resource-definition-file&quot;&gt;Resource Definition File&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;YAML file that presents a spec for a resource
    &lt;ul&gt;
      &lt;li&gt;can also be JSON&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Sections
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apiVersion&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;metadata&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;spec&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: it’s not possible to use environment variable in spec file&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;kubectl&quot;&gt;kubectl&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;kubectl supports one version forward and backward skew&lt;/li&gt;
  &lt;li&gt;looks for &lt;code class=&quot;highlighter-rouge&quot;&gt;$HOME/.kube/config&lt;/code&gt; file for configuration
    &lt;ul&gt;
      &lt;li&gt;can also be specified with &lt;code class=&quot;highlighter-rouge&quot;&gt;--kubeconfig&lt;/code&gt; flag&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;export KUBERNETES_MASTER=http://host01:8080&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;defines master to communicate with&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pod pod1&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pods&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pod -l run=my-nginx&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;get pod with specific label&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get deployments&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl config use-context xxx&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;swtich context (environment)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl run my-web --image=nginx --port=80&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;creates a &lt;strong&gt;deployment&lt;/strong&gt; object&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl expose deployment my-web --target-port=80 --type=NodePort&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;creates a service that exposes a deployment&lt;/li&gt;
      &lt;li&gt;allows external access through &lt;code class=&quot;highlighter-rouge&quot;&gt;NodePort&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl scale deployment hello-node --replicas=4&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get svc&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;list services&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectrl create -f storage-memory.yaml&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;create pod, namespace etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl create namespace staging&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;create new namespace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl exec foo-37kj5 -i -t -- sh&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;like &lt;code class=&quot;highlighter-rouge&quot;&gt;docker exec&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl exec -it two-containers -c nginx-container -- /bin/bash&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;specifies pod &lt;strong&gt;and&lt;/strong&gt; container&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl logs foo-37kj5&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;check log from a pod&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt; to specify a container&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pod nginx -o go-template=''&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;get IP of pod named &lt;code class=&quot;highlighter-rouge&quot;&gt;nginx&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl describe namespace/test&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;describe stuff&lt;/li&gt;
      &lt;li&gt;other stuff maybe &lt;code class=&quot;highlighter-rouge&quot;&gt;rc/busybox-ns&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl describe service ghost&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl set image deployment/hello-node hello-node=gcr.io/$PROJECT_ID/hello-node:v2&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;upgrade a service by setting a new version of image&lt;/li&gt;
      &lt;li&gt;won’t work if the image name stays the same, e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;:latest&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl delete pod nginx&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl delete pods &amp;lt;pod&amp;gt; --grace-period=0 --force&lt;/code&gt; to force it&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl delete rc nginx&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;delete replication controller&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl delete svc nginx&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;delete service&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl logs -c container pod&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl config use-context k3&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;switch cluster&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl cordon $NODENAME&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;make node unschedlable&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get nodes -o jsonpath='{range.items[*].metadata}{.name} {end}'&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pod liang-web-3685169472-vbxh6 -o jsonpath='{.status.podIP}'&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;specific information retrieval&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl patch node k8s-node-1 -p '{&quot;spec&quot;:{&quot;unschedulable&quot;:true}}&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;patch a node so that it’ll not be scheduled on&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl patch (-f FILENAME TYPENAME) -p PATCH&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl edit deploy/orchestration&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;fire up editor and edit YAML definition of a deployment&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl convert -f pod.yaml --output-version v1&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;convert/migrate file between API version&lt;/li&gt;
      &lt;li&gt;can be done locally or through API server&lt;/li&gt;
      &lt;li&gt;schema are stored under &lt;code class=&quot;highlighter-rouge&quot;&gt;$HOME/.kube/schema/&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl explain --recursive pod&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;describes what a pod definition is&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get pods --all-namespaces -o custom-columns=NAME:.metadata.name,NAMESPACE:.metadata.namespace,QOS-CLASS:.status.qosClass&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;customized field&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get rs,secrets -o json --namespace old | jq '.items[].metadata.namespace = &quot;new&quot;' | kubectl create -f  -&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get node -v8&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;very verbose, good for debugging&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=grafana -o jsonpath='{.items[0].metadata.name}') 3000:3000&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;port-forward&lt;/code&gt; forward one or more local ports to a pod&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl cordon&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;make the node unschedulable&lt;/li&gt;
      &lt;li&gt;same as &lt;code class=&quot;highlighter-rouge&quot;&gt;node.Spec.Unschedulable=true&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl drain&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;first it &lt;em&gt;cordon&lt;/em&gt; the node&lt;/li&gt;
      &lt;li&gt;then does &lt;em&gt;evict&lt;/em&gt; of pods
        &lt;ul&gt;
          &lt;li&gt;
            &lt;blockquote&gt;
              &lt;p&gt;1.7&lt;/p&gt;
            &lt;/blockquote&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;pods can be filtered, e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;--ignore-daemonsets&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://banzaicloud.com/blog/drain/&quot;&gt;banzaicloud&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get secret gitlab-registry --namespace=revsys-com --export -o yaml |\ kubectl apply --namespace=devspectrum-dev -f -&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;copy objects betwen namespaces&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;troubleshooting&quot;&gt;Troubleshooting&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get cs&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;get componentstatuses for master: scheduler, controller manager, etcd&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl top&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;requires heapster to work&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;security&quot;&gt;Security&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl certificate approve&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl certificate deny&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;configuration&quot;&gt;Configuration&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$HOME/.kube/config&lt;/code&gt; includes configuration for all contexts&lt;/li&gt;
  &lt;li&gt;it has several sections
    &lt;ul&gt;
      &lt;li&gt;cluster&lt;/li&gt;
      &lt;li&gt;context&lt;/li&gt;
      &lt;li&gt;user&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;to get a new cluster into the &lt;code class=&quot;highlighter-rouge&quot;&gt;config&lt;/code&gt; file, one has to merge content of &lt;code class=&quot;highlighter-rouge&quot;&gt;admin.conf&lt;/code&gt;
into it&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl --kubeconfig ./admin.conf get nodes&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;config file is generated by &lt;code class=&quot;highlighter-rouge&quot;&gt;kubeadm&lt;/code&gt; in &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/kubernetes/admin/.conf&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;use the following combination
    &lt;ul&gt;
      &lt;li&gt;kube-ps1 + kubectx + kubens!!!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@ahmetb/mastering-kubeconfig-4e447aa32c75&quot;&gt;medium, master&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;merge, extract, direct use of username, password&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cli&quot;&gt;CLI&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # Save certificates and the key as files
 $ kubectl config set-cluster default-cluster --server=https://45.32.47.214  --certificate-authority=${CA_CERT}
 $ kubectl config set-credentials default-admin --certificate-authority=${CA_CERT} --client-key=${ADMIN_KEY} --client-certificate=${ADMIN_CERT}
 $ kubectl config set-context default-system --cluster=default-cluster --user=default-admin
 $ kubectl config use-context default-system
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;plugins-1&quot;&gt;Plugins&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;loaded from predefined directories:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$HOME/.kube/plugin&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;.kube/plugin/hello/plugin.yaml&lt;/code&gt; has to follow this naming&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl plugin hello&lt;/code&gt; runs the plugin&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links-2&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mankier.com/package/kubernetes-client&quot;&gt;kubectl man pages&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/tools/install-kubectl/#download-as-part-of-the-google-cloud-sdk&quot;&gt;installation&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;with manual download instruction&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;yaml&quot;&gt;YAML&lt;/h1&gt;

&lt;h2 id=&quot;meta&quot;&gt;Meta&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apiVersion&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kind&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;pod&lt;/li&gt;
      &lt;li&gt;rc&lt;/li&gt;
      &lt;li&gt;Deployment&lt;/li&gt;
      &lt;li&gt;Service&lt;/li&gt;
      &lt;li&gt;etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;label&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;spec-1&quot;&gt;Spec&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;containers&lt;/code&gt;: type list
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;image&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ports&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;has &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;!!!&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sample&quot;&gt;Sample&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: web-deployment
spec:
  replicas: 2
  template:
    metadata:
      labels:
        name: web
    spec:
      containers:
      - image: gcr.io/&amp;lt;YOUR-PROJECT-ID&amp;gt;/myapp
        name: web
        ports:
        - name: http-server
          containerPort: 3000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;api-1&quot;&gt;API&lt;/h1&gt;

&lt;h2 id=&quot;overview&quot;&gt;Overview&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;resource catagory
    &lt;ul&gt;
      &lt;li&gt;workloads&lt;/li&gt;
      &lt;li&gt;discovery &amp;amp; LB&lt;/li&gt;
      &lt;li&gt;config and storage&lt;/li&gt;
      &lt;li&gt;cluster&lt;/li&gt;
      &lt;li&gt;metadata&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;resource objects
    &lt;ul&gt;
      &lt;li&gt;spec&lt;/li&gt;
      &lt;li&gt;status&lt;/li&gt;
      &lt;li&gt;meta&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;resource operation
    &lt;ul&gt;
      &lt;li&gt;create&lt;/li&gt;
      &lt;li&gt;read&lt;/li&gt;
      &lt;li&gt;delete&lt;/li&gt;
      &lt;li&gt;rollback&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;workloads
    &lt;ul&gt;
      &lt;li&gt;deployments: for stateless apps&lt;/li&gt;
      &lt;li&gt;statefullset: for persistent apps&lt;/li&gt;
      &lt;li&gt;jobs: run-to-completion apps&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;convention&quot;&gt;Convention&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Kind&lt;/li&gt;
  &lt;li&gt;Resource&lt;/li&gt;
  &lt;li&gt;API Group
    &lt;ul&gt;
      &lt;li&gt;group/version&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links-3&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/api-reference/v1.6/#podspec-v1-core&quot;&gt;1.6 pod spec&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/api-reference/v1.6/#container-v1-core&quot;&gt;1.6 container&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/api-reference/v1.6/#deployment-v1beta1-apps&quot;&gt;1.6 deployment&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/api-reference/v1.6/#service-v1-core&quot;&gt;1.6 service&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.openshift.com/container-platform/3.7/rest_api/index.html&quot;&gt;openshift 3.7&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;REST API reference&lt;/li&gt;
      &lt;li&gt;not directly k8s but should be the same&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;proxy&quot;&gt;Proxy&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl proxy -p 8001&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;generates a proxy server that can be used as REST API server&lt;/li&gt;
      &lt;li&gt;handles authentication&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;curl http://localhost:8001/api/v1/namespaces/default/pods&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;ui&quot;&gt;UI&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://codeberg.org/hjacobs/kube-web-view/&quot;&gt;kube-web-view&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://kube-web-view.demo.j-serv.de/clusters/local/nodes&quot;&gt;live demo&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/herbrandson/k8dash&quot;&gt;k8dash&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/smpio/kubernator&quot;&gt;kubernator&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/dashboard&quot;&gt;dashboard&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/hjacobs/kube-ops-view&quot;&gt;kube-ops-view&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;ops oriented, with node, cpu, ram as center view&lt;/li&gt;
      &lt;li&gt;python, js&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/hjacobs/kube-resource-report/&quot;&gt;kube-resource-report&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;node cost for cloud resources&lt;/li&gt;
      &lt;li&gt;Python, html (static site)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/vmware/octant&quot;&gt;octant, vmware&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://srcco.de/posts/kubernetes-web-uis-in-2019.html&quot;&gt;comp, blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;install&quot;&gt;Install&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://get.k8s.io&quot;&gt;get&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/releases/latest&quot;&gt;binary&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;each node runs:
    &lt;ul&gt;
      &lt;li&gt;docker&lt;/li&gt;
      &lt;li&gt;kubelet&lt;/li&gt;
      &lt;li&gt;kube-proxy (not strictly required on a master node)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;kubernetes services, each run as a pod on the master node
    &lt;ul&gt;
      &lt;li&gt;apiserver&lt;/li&gt;
      &lt;li&gt;controller manager&lt;/li&gt;
      &lt;li&gt;scheduler&lt;/li&gt;
      &lt;li&gt;all runs the same &lt;code class=&quot;highlighter-rouge&quot;&gt;hyperkube&lt;/code&gt; binary with different swtich
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;hyperkube&lt;/code&gt; is like &lt;code class=&quot;highlighter-rouge&quot;&gt;busybox&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;kubernetes-the-hard-way&quot;&gt;kubernetes the hard way&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;download cfssl and cfssljson&lt;/li&gt;
  &lt;li&gt;prepare compute instances (gcloud specific)&lt;/li&gt;
  &lt;li&gt;create CA
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cfssl gencert -initca ca-csr.json | cfssljson -bare ca&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;creates &lt;code class=&quot;highlighter-rouge&quot;&gt;ca.pem&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;ca-key.pem&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;create admin client certificate
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cfssl gencert -ca=xxx -ca-key=xxx -config=xxx -profile=xxx admin-csr.json | cfssljson -bare admin&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;ca and ca-key is generated in previous step&lt;/li&gt;
      &lt;li&gt;creates &lt;code class=&quot;highlighter-rouge&quot;&gt;admin.pem&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;admin-key.pem&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;likely, create api server certificate&lt;/li&gt;
  &lt;li&gt;likely, create kubelet client certificate&lt;/li&gt;
  &lt;li&gt;distribute certification
    &lt;ul&gt;
      &lt;li&gt;copy &lt;code class=&quot;highlighter-rouge&quot;&gt;ca.pem&lt;/code&gt; and instance certificates to each minion&lt;/li&gt;
      &lt;li&gt;copy &lt;code class=&quot;highlighter-rouge&quot;&gt;ca.pem&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;ca-key.pem&lt;/code&gt; and api server certs to each controller&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;configure encryption configuration&lt;/li&gt;
  &lt;li&gt;bring up etcd
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo cp ca.pem kubernetes-key.pem kubernetes.pem /etc/etcd/&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;configure systemd etcd service&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;bring up kubernetes control plane
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo mv ca.pem ca-key.pem kubernetes-key.pem kubernetes.pem encryption-config.yaml /var/lib/kubernetes/&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;CA key pair&lt;/li&gt;
          &lt;li&gt;api server key pair&lt;/li&gt;
          &lt;li&gt;encryption config&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;configure apiserver with systemd&lt;/li&gt;
      &lt;li&gt;configure controller manager&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get componentstatuses&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;bring up node
    &lt;ul&gt;
      &lt;li&gt;download cni binary&lt;/li&gt;
      &lt;li&gt;download crio binary&lt;/li&gt;
      &lt;li&gt;configure network&lt;/li&gt;
      &lt;li&gt;configure kubelet&lt;/li&gt;
      &lt;li&gt;configure kubeproxy&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;deploy DNS add-on&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kelseyhightower/kubernetes-the-hard-way&quot;&gt;link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;minikube&quot;&gt;minikube&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;brew install Caskroom/cask/minikube&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;minikube start&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;minikube dashboard&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;kubeadm&quot;&gt;kubeadm&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;automated installation tool, handles
    &lt;ul&gt;
      &lt;li&gt;preflight check&lt;/li&gt;
      &lt;li&gt;PKI creation&lt;/li&gt;
      &lt;li&gt;generates token used for node to join&lt;/li&gt;
      &lt;li&gt;manages kubelet running options&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;by default, images are pulled from gcr.io/google_containers
    &lt;ul&gt;
      &lt;li&gt;apiserver&lt;/li&gt;
      &lt;li&gt;controller-manager&lt;/li&gt;
      &lt;li&gt;scheduler&lt;/li&gt;
      &lt;li&gt;proxy&lt;/li&gt;
      &lt;li&gt;etcd&lt;/li&gt;
      &lt;li&gt;pause&lt;/li&gt;
      &lt;li&gt;dns-sidecar&lt;/li&gt;
      &lt;li&gt;kube-dns&lt;/li&gt;
      &lt;li&gt;dns-masq&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;installs DNS add-on
    &lt;ul&gt;
      &lt;li&gt;can pick from default and coredns&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;when &lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE_HYPERKUBE_IMAGE&lt;/code&gt; is defined, a single hyperkube image is used&lt;/li&gt;
  &lt;li&gt;configuration can be done through file&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/admin/kubeadm/&quot;&gt;reference&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/issues/42791&quot;&gt;ntp&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;ntp should be installed on all nodes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;install-1&quot;&gt;Install&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;normally with &lt;code class=&quot;highlighter-rouge&quot;&gt;apt&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;yum&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;configurable&quot;&gt;Configurable&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--pod-network-cidr&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;etcd server
    &lt;ul&gt;
      &lt;li&gt;either through image envar&lt;/li&gt;
      &lt;li&gt;or config file&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;repo prefix
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;KUBE_REPO_PREFIX&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;when specified, &lt;code class=&quot;highlighter-rouge&quot;&gt;--pod-infra-container-image&lt;/code&gt; has to be change too&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;each-host&quot;&gt;Each host&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;docker&lt;/li&gt;
  &lt;li&gt;kubelet&lt;/li&gt;
  &lt;li&gt;kubectl (master only)&lt;/li&gt;
  &lt;li&gt;kubeadm&lt;/li&gt;
  &lt;li&gt;cni&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;steps&quot;&gt;Steps&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;install docker&lt;/li&gt;
  &lt;li&gt;install kubernetes packages (apt)
    &lt;ul&gt;
      &lt;li&gt;kubelet&lt;/li&gt;
      &lt;li&gt;kubectl&lt;/li&gt;
      &lt;li&gt;kubeadm&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;disable SELinux&lt;/li&gt;
  &lt;li&gt;on master, do
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubeadmin init --api-advertise-addresses=&amp;lt;host_ip&amp;gt; --use-kubernetes-version=v1.5.3 --pod-network-cidr=10.244.0.0/16&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl apply -f kube-flannel.yml&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;normally kubernets’ images are self contained. but if there is mismatch
between versions, do &lt;code class=&quot;highlighter-rouge&quot;&gt;export XXXX_IAMGE=bla&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;on each node
    &lt;ul&gt;
      &lt;li&gt;flannel images has to be present on each node&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubeadm join --token=d562d2.bf3721e0655d4f12 192.168.0.177&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubctl get nodes&lt;/code&gt; on master should show all nodes&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;internal-1&quot;&gt;Internal&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;with control plane, it uses &lt;code class=&quot;highlighter-rouge&quot;&gt;kubelet&lt;/code&gt; to managed components like &lt;code class=&quot;highlighter-rouge&quot;&gt;etcd, apiserver&lt;/code&gt; etc
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;systemd&lt;/code&gt; runs &lt;code class=&quot;highlighter-rouge&quot;&gt;kubelet&lt;/code&gt; as a normal process&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubelet --pod-manifest-path /etc/kubernetes/manifests&lt;/code&gt; starts everything
in that directory as pods
        &lt;ul&gt;
          &lt;li&gt;files in that folder are simply kubernetes YAML spec that &lt;code class=&quot;highlighter-rouge&quot;&gt;kubelet&lt;/code&gt;
understands&lt;/li&gt;
          &lt;li&gt;see &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/systemd/system/kubelet.service.d/10-kubeadm.conf&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ianlewis.org/en/how-kubeadm-initializes-your-kubernetes-master&quot;&gt;how does it work&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;okdc&quot;&gt;OKDC&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.dockone.io/article/2296&quot;&gt;dockone, okdc&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;no need to install docker&lt;/li&gt;
  &lt;li&gt;install lsb&lt;/li&gt;
  &lt;li&gt;make sure /etc/hosts has all the nodes&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;setenforce 0&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;on master
    &lt;ul&gt;
      &lt;li&gt;just run the script&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;on node
    &lt;ul&gt;
      &lt;li&gt;at the end of the master run it actually gives command to run on the node&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;commands&quot;&gt;commands&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get update
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/apt/sources.list.d/kubernetes.list
   deb http://apt.kubernetes.io/ kubernetes-xenial main
   EOF
apt-get update
apt-get install -y docker.io
apt-get install -y kubelet kubeadm kubectl kubernetes-cni
service kubelet stop
service kubelet start
kubeadm init --use-kubernetes-version v1.4.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;security-1&quot;&gt;Security&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;having SSH account into container is bad practice&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Shopify/kubeaudit&quot;&gt;kubeaudit&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;automatically audit security in a kubernetes cluster&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;scheduling&quot;&gt;Scheduling&lt;/h1&gt;
&lt;h2 id=&quot;pdb&quot;&gt;PDB&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;poddisruptionbudget&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;specifies tolerated number of pods to keep alive, making sure that there are
some left
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl create pdb my-pdb --selector=app=nginx --min-available=70%&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;this will be observed by pod &lt;strong&gt;eviction&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;which is the difference between &lt;code class=&quot;highlighter-rouge&quot;&gt;delete&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;evict&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;resource&quot;&gt;Resource&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;v1/ResourceQuota&lt;/code&gt; object
    &lt;ul&gt;
      &lt;li&gt;one or more per namespace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;once quota is enabled, user must specify request or limits for those values&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--admission-control=&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;quota can be set for computatation resources as well as kubernetes objects
like service, etc&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;requests.foo&lt;/code&gt; makes explict request for resources&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;limits.foo&lt;/code&gt; specifies explict limits for resources&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;foo&lt;/code&gt; can be &lt;code class=&quot;highlighter-rouge&quot;&gt;cpu&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;memory&lt;/code&gt;, etc&lt;/li&gt;
  &lt;li&gt;memory is total resident set size (RSS) and page cache, swap is disabled so not included
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://medium.com/expedia-group-tech/kubernetes-container-resource-requirements-part-1-memory-a9fbe02c8a5f&quot;&gt;here&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;pretty nice article, explaining memory limit&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7880784/what-is-rss-and-vsz-in-linux-memory-management&quot;&gt;so, RSS&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;1 CPU == 1 hyperthread in a Intel processor&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;LimitRange&lt;/code&gt; sets resource usage limits for each kind of resource in a Namespace.
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/thockin/micro-demos/blob/master/quota/limits.yaml&quot;&gt;demo&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/troubleshoot-kubernetes-oom/&quot;&gt;sysdig, oom, trouble&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;How to troubleshoot Kubernetes OOM and CPU Throttle&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;Despite this mechanism, we can still finish up with system OOM kills as Kubernetes memory management runs only every several seconds. If the system memory fills too quickly, the system can kill Kubernetes control processes, making the node unstable.&lt;/em&gt;&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;using CPU can never be the reason of Kubernetes killing a container.&lt;/em&gt;&lt;/li&gt;
      &lt;li&gt;❓ not sure I fully understand the CPU throttling part&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;security-context&quot;&gt;Security Context&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;defines privilege for a Pod as part of a pod spec&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;runAsUser: 1000&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;capabilities&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;pod-security-policy&quot;&gt;Pod Security Policy&lt;/h2&gt;

&lt;h2 id=&quot;secrets&quot;&gt;Secrets&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;v1/Secret&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;defined as k/v pairs&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl create secret &amp;lt;docker-registry, generic, tls&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;access&quot;&gt;Access&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;volume: &lt;code class=&quot;highlighter-rouge&quot;&gt;volumes.secret&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;mounted as directory matching secrete name, under which&lt;/li&gt;
      &lt;li&gt;file name matches key&lt;/li&gt;
      &lt;li&gt;file content matches value&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;envar: &lt;code class=&quot;highlighter-rouge&quot;&gt;env.valueFrom.valueFrom&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;with &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt; to access the value&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;cli-1&quot;&gt;CLI&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get quota --namespace=myspace&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl describe quota compute-resources --namespace=myspace&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl describe quota object-counts --namespace=myspace&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links-4&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/policy/resource-quotas/&quot;&gt;official&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/administer-cluster/quota-api-object/&quot;&gt;official practical&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;monitoring&quot;&gt;Monitoring&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;4 level of monitoring
    &lt;ul&gt;
      &lt;li&gt;host&lt;/li&gt;
      &lt;li&gt;containers&lt;/li&gt;
      &lt;li&gt;kubernetes&lt;/li&gt;
      &lt;li&gt;applications&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;cAdvisor, kubelet -&amp;gt; heapster -&amp;gt; backend
    &lt;ul&gt;
      &lt;li&gt;backend supported:
        &lt;ul&gt;
          &lt;li&gt;influxdb&lt;/li&gt;
          &lt;li&gt;opentsdb&lt;/li&gt;
          &lt;li&gt;kafka&lt;/li&gt;
          &lt;li&gt;many others&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;heapster run as a pod in the cluster&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;cadvisor&quot;&gt;cAdvisor&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;runs as part of kubelet&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links-5&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.datadoghq.com/blog/monitoring-kubernetes-era/&quot;&gt;datadog&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;However, as explained in the first section of this post, to track memory
and CPU usage you should favor the metrics reported by your container
technology, such as Docker, rather than the Kubernetes statistics reported
by Heapster.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;container-runtime&quot;&gt;Container Runtime&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/05/24/kubernetes-containerd-integration-goes-ga/&quot;&gt;containerd blog&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;containerd integration goes GA&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;arch-2&quot;&gt;Arch&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://borlandc.pek3b.qingstor.com/container/cri-containerd.jpg&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;cri&quot;&gt;CRI&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;container runtime interface for kubernetes&lt;/li&gt;
  &lt;li&gt;parallel to CNI, CSI, etc&lt;/li&gt;
  &lt;li&gt;implementations
    &lt;ul&gt;
      &lt;li&gt;containerd (cri, cri-containerd)&lt;/li&gt;
      &lt;li&gt;CRI-O: &lt;a href=&quot;https://www.opencontainers.org&quot;&gt;OCI&lt;/a&gt; conformant, used to be called OCID, RedHat, etc&lt;/li&gt;
      &lt;li&gt;frakti (hyper.sh)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.openstack.org/assets/presentation-media/hyper-kata-frakti-cri2.pdf&quot;&gt;openstack, PDF, PPT&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;topic is Frakti, but has a good bit of information on CRI, with history,
landscape, etc&lt;/li&gt;
      &lt;li&gt;kata&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubic.opensuse.org/blog/2018-09-17-crio-default/&quot;&gt;suse, cri-o, kubic&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;CRI-O is now our default container runtime interface&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.com/news/2019/05/cri-o-kubernetes-runtime/&quot;&gt;infoq&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;CRI-O: An Open Source Container Runtime for Kubernetes&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;spec-2&quot;&gt;Spec&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Sandbox
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Create&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Delete&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;List&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Container
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Create&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Start&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Exec&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Image
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Pull&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;List&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;cri-o&quot;&gt;CRI-O&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://cri-o.io/&quot;&gt;.io&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;conmon handles monitoring, including logging&lt;/li&gt;
  &lt;li&gt;podman is like docker CLI&lt;/li&gt;
  &lt;li&gt;docker and podman can co-exist on the same host&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;CRI-O 1.13 shipping with OpenShift 4.1 as the only supported engine&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;containerd&quot;&gt;containerd&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;container runtime&lt;/li&gt;
  &lt;li&gt;as a daemon&lt;/li&gt;
  &lt;li&gt;responsible for
    &lt;ul&gt;
      &lt;li&gt;image transfer&lt;/li&gt;
      &lt;li&gt;container execution&lt;/li&gt;
      &lt;li&gt;network attachment&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;full OCI support&lt;/li&gt;
  &lt;li&gt;depends on runc&lt;/li&gt;
  &lt;li&gt;stuff are namespaced
    &lt;ul&gt;
      &lt;li&gt;within kubernetes, &lt;code class=&quot;highlighter-rouge&quot;&gt;k8s.io&lt;/code&gt; is the default namespace&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.docker.com/2016/12/introducing-containerd/&quot;&gt;spun out of docker&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;into CNCF&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/containerd&quot;&gt;github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/containerd/cri&quot;&gt;cri plugin &lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/containerd/cri/blob/master/docs/crictl.md&quot;&gt;crictl&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-sigs/cri-tools/blob/master/docs/crictl.md&quot;&gt;sig crictl&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;rurnc&quot;&gt;rurnc&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;runc&lt;/code&gt; is a CLI tool for spawning and running containers according to the OCI specification.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;rancher&quot;&gt;Rancher&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;replace SkyDNS with Rancher DNS
    &lt;ul&gt;
      &lt;li&gt;allow cluster to expand over different resource pools and clouds&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;helm&quot;&gt;Helm&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;for managing k8s charts&lt;/li&gt;
  &lt;li&gt;uses &lt;a href=&quot;https://golang.org/pkg/text/template/&quot;&gt;Go template&lt;/a&gt; syntax&lt;/li&gt;
  &lt;li&gt;a &lt;strong&gt;repo&lt;/strong&gt; is a place where charts are stored&lt;/li&gt;
  &lt;li&gt;a &lt;strong&gt;chart&lt;/strong&gt; is like a &lt;code class=&quot;highlighter-rouge&quot;&gt;.deb&lt;/code&gt; file
    &lt;ul&gt;
      &lt;li&gt;includes all related kubernetes resources&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;release&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;a chart instance&lt;/li&gt;
      &lt;li&gt;same chart can be installed more than once&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;hooks
    &lt;ul&gt;
      &lt;li&gt;e.g. post-install, post-upgrade&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;operation&lt;/strong&gt; can be any k8s object&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;annotations: { &quot;helm.sh/hook&quot;: ...}&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;very much like Rancher catalogue&lt;/li&gt;
  &lt;li&gt;benefits:
    &lt;ul&gt;
      &lt;li&gt;parameterisation&lt;/li&gt;
      &lt;li&gt;application lifecycle hook&lt;/li&gt;
      &lt;li&gt;history of releases&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/charts&quot;&gt;charts&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;github repo for charts&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;installation
    &lt;ul&gt;
      &lt;li&gt;download binary from web&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;brew install kubernetes-helm&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sweetcode.io/a-first-look-at-the-helm-3-plan/&quot;&gt;sweetcode, firstlook, helm3, lua&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;a first look at helm3 plan&lt;/li&gt;
      &lt;li&gt;Lua to replace Go template for better readability&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://caylent.com/15-useful-helm-charts-tools/&quot;&gt;tools, 15&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;15 useful helm chart tools&lt;/li&gt;
      &lt;li&gt;helm diff, helmsman&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://codefresh.io/docs/docs/new-helm/helm-best-practices/#helm-vs-k8s-templates&quot;&gt;codefresh, template, note&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;helm is not &lt;strong&gt;only&lt;/strong&gt; a template solution&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;arch-3&quot;&gt;Arch&lt;/h2&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/container/helm-application-deployment-management-for-kubernetes-13-638.jpg” width=75%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;cli-2&quot;&gt;CLI&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm init&lt;/code&gt;:
    &lt;ul&gt;
      &lt;li&gt;creats and populate &lt;code class=&quot;highlighter-rouge&quot;&gt;$HOME/.helm&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm repo update&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm repo add &amp;lt;name&amp;gt; &amp;lt;url&amp;gt;&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm repo add bitnami https://charts.bitnami.com/bitnami&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm search&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm install&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm install --name kubeapps --namespace kubeapps bitnami/kubeapps&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;normally the chart will prints out some information on how to use it
afterwards
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm status&lt;/code&gt; has same effect&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm rollback&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm list&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;list all releases&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm delete &amp;lt;release&amp;gt;&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;after deletion, &lt;code class=&quot;highlighter-rouge&quot;&gt;helm status &amp;lt;release&amp;gt;&lt;/code&gt; still works, &lt;code class=&quot;highlighter-rouge&quot;&gt;ns&lt;/code&gt; is still there&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm create&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;creates skeleton for a new chart&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm reset&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;uninstall helm&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm serve&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;run a local helm repo server&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chart&quot;&gt;Chart&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;organized as a collection of files inside a directory
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Chart.yaml&lt;/code&gt; - metadata
        &lt;ul&gt;
          &lt;li&gt;name, version, appVersion, keywords, etc&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;values.yaml&lt;/code&gt; - variable referenced in templates&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;charts/&lt;/code&gt; - dependency chart&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;templates/&lt;/code&gt; - your own template files&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;templates/_helpers.yaml&lt;/code&gt; stores utility macros&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;chart can have dependencies&lt;/li&gt;
  &lt;li&gt;default templating is done with Go template
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;values.yaml&lt;/code&gt; includes default value&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.Values&lt;/code&gt; - stuff in &lt;code class=&quot;highlighter-rouge&quot;&gt;values.yaml&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;looks like variable name that starts with &lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt; is built-in&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;a chart can have subcharts&lt;/li&gt;
  &lt;li&gt;private char repo:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm package .&lt;/code&gt; from where &lt;code class=&quot;highlighter-rouge&quot;&gt;Chart.yaml&lt;/code&gt; is&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm repo index .&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;devd .&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm repo add local http://127.0.0.1:8000&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;it generates &lt;code class=&quot;highlighter-rouge&quot;&gt;index.yaml&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;hello-1.0.0.tar.gz&lt;/code&gt;
        &lt;ul&gt;
          &lt;li&gt;tarball has all the chart files&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;functions
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Files.Get()&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jfrog.com/blog/enterprise-grade-helm-chart-repository-jfrog-artifactory/&quot;&gt;jfrog&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;jfrog 5.8 supports private helm chart&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://engineering.bitnami.com/articles/what-the-helm-is-monocular.html&quot;&gt;monocular&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;search and discovery front-end for helm chart repo&lt;/li&gt;
      &lt;li&gt;has REST API and UI&lt;/li&gt;
      &lt;li&gt;can be used in wisecloud&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubeapps/kubeapps&quot;&gt;kubeapps&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;UI for helm&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://hackernoon.com/using-a-private-github-repo-as-helm-chart-repo-https-access-95629b2af27c&quot;&gt;hackernoon&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;using private github repo&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;helm-3&quot;&gt;Helm 3&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;removal of tiller&lt;/li&gt;
  &lt;li&gt;release name are namespaced&lt;/li&gt;
  &lt;li&gt;push chart into OCI registry&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;high-availability&quot;&gt;High Availability&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.fawwheel.com/keithtt/p/6649995.html&quot;&gt;keith&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;external etcd&lt;/li&gt;
      &lt;li&gt;master each has a keep alived&lt;/li&gt;
      &lt;li&gt;use kubeadm for installation&lt;/li&gt;
      &lt;li&gt;pull images from a pre-defined HTTP server&lt;/li&gt;
      &lt;li&gt;single BASH script for master and node&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/admin/high-availability/&quot;&gt;official&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;mentioned &lt;code class=&quot;highlighter-rouge&quot;&gt;monit&lt;/code&gt; for monitoring k8s and docker daemon&lt;/li&gt;
      &lt;li&gt;talked about etcd&lt;/li&gt;
      &lt;li&gt;api is replicated and load-balanced&lt;/li&gt;
      &lt;li&gt;scheduler and controller-manager which actually modifies the cluster state
uses the &lt;code class=&quot;highlighter-rouge&quot;&gt;--leader-elect&lt;/code&gt; flag to make sure only one is doing the work 
at a time&lt;/li&gt;
      &lt;li&gt;see &lt;strong&gt;ha with ansible&lt;/strong&gt; in the link section&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-incubator/kargo&quot;&gt;kargo&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Capgemini/kubeform&quot;&gt;kubeform&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sumitkgaur.wordpress.com/2016/07/30/kubernetes-truely-ha-cluster/&quot;&gt;sumit/podmaster&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;works together with etcd&lt;/li&gt;
      &lt;li&gt;make sure that only the leader runs scheduler&lt;/li&gt;
      &lt;li&gt;generic solution but mostly works with kubernetes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;kompose&quot;&gt;kompose&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;convert &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose&lt;/code&gt; file to Kubernetes files&lt;/li&gt;
  &lt;li&gt;by default, generateds deployments, service, etc in YAML
    &lt;ul&gt;
      &lt;li&gt;can also generates replication controller, daemon set, or helm charts
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-rc&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;also possible to export in JSON format
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-j&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;helm is possible to
        &lt;ul&gt;
          &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-c&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;written in Go&lt;/li&gt;
  &lt;li&gt;kompose specific labels
    &lt;ul&gt;
      &lt;li&gt;inside &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose&lt;/code&gt; file&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kompose.service.type&lt;/code&gt;: nodeport, clusterip, loadbalancer&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kompose.service.expose&lt;/code&gt;: true/hostname&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;unsupported-syntax&quot;&gt;Unsupported syntax&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;build&lt;/code&gt; command
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dockerfile&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cap_add&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;links-6&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.kubernetes.io/2016/11/kompose-tool-go-from-docker-compose-to-kubernetes.html&quot;&gt;k8s blog&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;introduction article&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://kompose.io/&quot;&gt;io&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;official website&lt;/li&gt;
      &lt;li&gt;includes an architecture explanation that looks like the translator&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://kompose.io/conversion/&quot;&gt;conversion&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;list of compose definitions and how it gets converted&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;internal-2&quot;&gt;Internal&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;etcd is used for data storage and implementation of &lt;strong&gt;watch&lt;/strong&gt; mechanism&lt;/li&gt;
  &lt;li&gt;only the API server access the etcd directly&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;kubelet&quot;&gt;kubelet&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;it finds pods to run from the API server&lt;/li&gt;
  &lt;li&gt;it runs an internal HTTP server on port 10255
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://kamalmarhubi.com/blog/2015/08/27/what-even-is-a-kubelet/&quot;&gt;what is&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;provides health check &lt;code class=&quot;highlighter-rouge&quot;&gt;/healtz&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/pods&lt;/code&gt; for pods running on the node&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;/spec&lt;/code&gt; for the spec of the node&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;./kubelet --api-servers=http://master:8080&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubelet --cluster-dns&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;specify cluster DNS server&lt;/li&gt;
      &lt;li&gt;it gets inserted into &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/resolv.conf&lt;/code&gt; when DNS policy is &lt;code class=&quot;highlighter-rouge&quot;&gt;clusterFirst&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;scheduler&quot;&gt;scheduler&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;runs on master&lt;/li&gt;
  &lt;li&gt;watches API server for unbound pod and assign it to a node&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;./kube-scheduler --master=http://localhost:8080&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;it is possible to run customized scheduler
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/&quot;&gt;howto&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/kubernetes-scheduler/&quot;&gt;ibm&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;controller-manager&quot;&gt;controller manager&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;watches the shared state of the cluster through the apiserver and makes
changes attempting to move the current state towards the desired state&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;pod-creation-sequence&quot;&gt;Pod creation sequence&lt;/h2&gt;
&lt;p&gt;&amp;lt;img src=”https://cdn-images-1.medium.com/max/1600/1*WDJmiyarVfcsDp6X1-lLFQ.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;links-7&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://kamalmarhubi.com/blog/2015/08/27/what-even-is-a-kubelet/&quot;&gt;what even is a kubelet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;troubleshooting-1&quot;&gt;Troubleshooting&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;journalctl -r -u kubelet&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get events -w&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-w&lt;/code&gt; for watch&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;extending&quot;&gt;Extending&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://itnext.io/comparing-kubernetes-api-extension-mechanisms-of-custom-resource-definition-and-aggregated-api-64f4ca6d0966&quot;&gt;itnext&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;patterns api extension mechanism&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get apiservice&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;list current API names&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;crdtpr&quot;&gt;CRD/TPR&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/access-kubernetes-api/extend-api-custom-resource-definitions/&quot;&gt;task&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;primary&lt;/strong&gt; API extension mechanism&lt;/li&gt;
  &lt;li&gt;looks like it doesn’t support versioning &lt;a href=&quot;https://github.com/kubernetes/features/issues/544&quot;&gt;yet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;api-aggregation&quot;&gt;API Aggregation&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-incubator/apiserver-builder/blob/master/docs/concepts/aggregation.md&quot;&gt;incubator doc&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;full power of customization&lt;/li&gt;
  &lt;li&gt;require etc storage&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;custom-sub-resource&quot;&gt;Custom Sub resource&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;a sub resource can be on a native or custom Kind
    &lt;ul&gt;
      &lt;li&gt;An example of a custom sub-resource can be http_requests_total defined on a Pod will allow you to find out the number of HTTP requests received by that Pod.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;admission-webhook-1&quot;&gt;Admission Webhook&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/features/issues/492&quot;&gt;admission webhook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;operator&quot;&gt;Operator&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;k8s native way to run stateful application&lt;/li&gt;
  &lt;li&gt;basic work flow is:
    &lt;ul&gt;
      &lt;li&gt;observe if the cluster has the right size&lt;/li&gt;
      &lt;li&gt;reconcile&lt;/li&gt;
      &lt;li&gt;rebalance data&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;in a nutshell
    &lt;ul&gt;
      &lt;li&gt;reponsed to events
        &lt;ul&gt;
          &lt;li&gt;created&lt;/li&gt;
          &lt;li&gt;updated&lt;/li&gt;
          &lt;li&gt;deleted&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;try to reconcile&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;operator SDK
    &lt;ul&gt;
      &lt;li&gt;has CLI: &lt;code class=&quot;highlighter-rouge&quot;&gt;operator-sdk&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ operator-sdk new &amp;lt;operator-project-name&amp;gt; --api-version=&amp;lt;your-api-group&amp;gt;/&amp;lt;version&amp;gt; --kind=&amp;lt;custom-resource-kind&amp;gt;&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;operator-sdk generate k8s&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;operator-sdk build &amp;lt;docker-image&amp;gt;&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://banzaicloud.com/blog/operator-sdk/&quot;&gt;banzaicloud&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;a complete guide to kubernetes operator SDK&lt;/li&gt;
      &lt;li&gt;how to use the operator SDK
        &lt;ol&gt;
          &lt;li&gt;Create a new operator project&lt;/li&gt;
          &lt;li&gt;Define the Kubernetes resources to watch&lt;/li&gt;
          &lt;li&gt;Define the operator logic in a designated handler&lt;/li&gt;
          &lt;li&gt;Update and generate code for custom resources&lt;/li&gt;
          &lt;li&gt;Build and generate the operator deployment manifests&lt;/li&gt;
          &lt;li&gt;Deploy the operator&lt;/li&gt;
          &lt;li&gt;Create custom resources&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;arch-4&quot;&gt;Arch&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://blog.couchbase.com/wp-content/uploads/2018/03/Picture1-768x480.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;links-8&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/zalando-incubator/kopf&quot;&gt;python, operator&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kopf, from zalando&lt;/li&gt;
      &lt;li&gt;A Python framework to write Kubernetes operators in just few lines of code. https://kopf.readthedocs.io&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=wMqzAOp15wo&quot;&gt;youtube, hard&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Writing a Kubernetes Operator: the Hard Parts - Sebastien Guilloux, Elastic&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kccncna19.sched.com/event/UaeV&quot;&gt;schedule, pdf&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;operator lives into past (api server client uses a cached reader)&lt;/li&gt;
      &lt;li&gt;optimistic concurrency:
        &lt;ul&gt;
          &lt;li&gt;resource name&lt;/li&gt;
          &lt;li&gt;resource version&lt;/li&gt;
          &lt;li&gt;uid: on deletion&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;windows&quot;&gt;Windows&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;see dotnet.md&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;vm-virtualised-hardware&quot;&gt;VM, Virtualised Hardware&lt;/h1&gt;

&lt;h2 id=&quot;frakti&quot;&gt;Frakti&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;based on Hyper&lt;/li&gt;
  &lt;li&gt;requires&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=mBJ0tfLPyXg&quot;&gt;youtube&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://drive.google.com/file/d/0B6uGv-NC7DxDSmREaUhEdXl4NGM/view&quot;&gt;google drive&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;companion slides&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;kubevirt&quot;&gt;kubevirt&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;implemented as a entirely new &lt;code class=&quot;highlighter-rouge&quot;&gt;kind&lt;/code&gt; CRD&lt;/li&gt;
  &lt;li&gt;still needs PVC&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/05/22/getting-to-know-kubevirt/&quot;&gt;blog&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;getting to know kubevirt&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;virtlet&quot;&gt;virtlet&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;from Mirantis&lt;/li&gt;
  &lt;li&gt;implemented as CRI
    &lt;ul&gt;
      &lt;li&gt;daemonset is run on host where VM can be scheduled onto and handled separately from normal pods&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;runs arbitary QCOW2 images
    &lt;ul&gt;
      &lt;li&gt;image names are translated from &lt;code class=&quot;highlighter-rouge&quot;&gt;virtlet.cloud/&lt;/code&gt; to a real image address&lt;/li&gt;
      &lt;li&gt;so probably it still needs PVs&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mirantis.com/blog/virtlet-vms-containers-opencontrail-network-kubernetes-nfv/&quot;&gt;mirantis, introduction&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mirantis.com/blog/kubevirt-vs-virtlet-comparison-better/&quot;&gt;kubevirt vs virtlet&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubevirt vs virtlet&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://hub.docker.com/r/mirantis/virtlet/&quot;&gt;dockerhub&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;docker hub page has some nice info&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.virtlet.cloud/reference/volumes/#persistent-root-filesystem&quot;&gt;persistent&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;persistent root filesystem&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/Mirantis/virtlet/tree/master/examples#using-the-persistent-root-filesystem&quot;&gt;example&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;arch-5&quot;&gt;Arch&lt;/h3&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/k8s/virtletarchitecture.png” width=75%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;kata-container&quot;&gt;kata container&lt;/h2&gt;
&lt;p&gt;…&lt;/p&gt;

&lt;h1 id=&quot;distributions&quot;&gt;Distributions&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/poseidon/typhoon&quot;&gt;typhoon&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;minimal and free&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;release-history&quot;&gt;Release History&lt;/h1&gt;
&lt;h2 id=&quot;18&quot;&gt;1.8&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.kubernetes.io/2017/09/kubernetes-18-security-workloads-and.html&quot;&gt;blog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;core workloads promoted to beta2&lt;/li&gt;
  &lt;li&gt;RBAC out of beta&lt;/li&gt;
  &lt;li&gt;affinity moves out of annotation&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;19&quot;&gt;1.9&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;workloads AP GA
    &lt;ul&gt;
      &lt;li&gt;deployment, daemonset, rs, and statefulset&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apps/v1&lt;/code&gt; is the new version&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;apps/v1beta2&lt;/code&gt; deprecated&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;windows container support (beta)&lt;/li&gt;
  &lt;li&gt;ipv6 support (alpha)&lt;/li&gt;
  &lt;li&gt;coredns (alpha)&lt;/li&gt;
  &lt;li&gt;CRD (beta)&lt;/li&gt;
  &lt;li&gt;CSI (alpha)
    &lt;ul&gt;
      &lt;li&gt;container storage interface&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;deprecation
    &lt;ul&gt;
      &lt;li&gt;etcd2 support&lt;/li&gt;
      &lt;li&gt;default selectors. E.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;deployment.spec.selectors&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;volume.beta.kubernetes.io/storage-class&lt;/code&gt; annotation&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;supports IPv6 only cluster&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/community/blob/master/contributors/design-proposals/storage/raw-block-pv.md&quot;&gt;raw block support&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.9.md&quot;&gt;changelog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/workloads-18-19/&quot;&gt;workloads&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/features/issues/492&quot;&gt;admission webhook&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;beta&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;110&quot;&gt;1.10&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.10.md#downloads-for-v1100&quot;&gt;changelog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://coreos.com/blog/kubernetes-110-released&quot;&gt;coreos&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;better, more organized changelog&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;local persistent storage
    &lt;ul&gt;
      &lt;li&gt;diff from hostPath: configured through PVC, so no need to specify path on host in the spec&lt;/li&gt;
      &lt;li&gt;PV added &lt;code class=&quot;highlighter-rouge&quot;&gt;PersistentVolume.Spec.NodeAffinity&lt;/code&gt; field&lt;/li&gt;
      &lt;li&gt;storage class added &lt;code class=&quot;highlighter-rouge&quot;&gt;StorageClass.volumeBindingMode: WaitForFirstConsumer&lt;/code&gt; mode&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/storage/storage-classes/#local&quot;&gt;spec&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/vishh/community/blob/ba62a3f6cb9a301e95c4b64b9052455bdac9a3fe/contributors/design-proposals/local-storage-overview.md&quot;&gt;design&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-sigs/sig-storage-local-static-provisioner&quot;&gt;provisioner&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;does NOT support dynamic provisioning&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/04/13/local-persistent-volumes-beta/&quot;&gt;blog&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;show manual way of declaring storage class, PV and PVC&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://banzaicloud.com/blog/kafka-on-kubernetes/&quot;&gt;banzaicloud&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;using local PVC with kafka&lt;/li&gt;
          &lt;li&gt;configure where (mount point) local PV will be created&lt;/li&gt;
          &lt;li&gt;deploy daemonset for dynamic provisioning&lt;/li&gt;
          &lt;li&gt;create storage class&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/features/issues/504&quot;&gt;pod configurable resolv conf&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/features/issues/495&quot;&gt;pod process namespace sharing&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;API aggregation is stable&lt;/li&gt;
  &lt;li&gt;CSI becomes beta&lt;/li&gt;
  &lt;li&gt;TokenRequestAPI - identify pods&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.jetstack.io/blog/hidden-gems-1.10/&quot;&gt;jetstack&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;hidden gems&lt;/li&gt;
      &lt;li&gt;device plugin, like nVidia
        &lt;ul&gt;
          &lt;li&gt;[Setting up a GPU Enabled Kubernetes for Deep Learning](https://itnext.io/setting-up-a-gpu-enabled-kubernetes-for-deep-learning-aef8e198931b
            &lt;ul&gt;
              &lt;li&gt;enable GPU feature gate&lt;/li&gt;
              &lt;li&gt;on node: CUDA driver, install nvidia-docker2&lt;/li&gt;
              &lt;li&gt;k8s: run nvidia/k8s-device-plugin:1.9 daemonset. &lt;a href=&quot;https://github.com/NVIDIA/k8s-device-plugin&quot;&gt;github&lt;/a&gt;&lt;/li&gt;
              &lt;li&gt;resource limit: &lt;code class=&quot;highlighter-rouge&quot;&gt;nvidia.com/gpu: 3&lt;/code&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;core DNS beta&lt;/li&gt;
      &lt;li&gt;pids per pod (alpha)&lt;/li&gt;
      &lt;li&gt;shared PID namespace&lt;/li&gt;
      &lt;li&gt;CRD sub resource&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;111&quot;&gt;1.11&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.11.md#v1110&quot;&gt;changelog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/06/27/kubernetes-1.11-release-announcement/&quot;&gt;blog&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://coreos.com/blog/kubernetes-111-crds-pod-priority-and-more?utm_source=twitter&amp;amp;utm_medium=social&amp;amp;utm_campaign=organic&quot;&gt;coreos&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;coredns as default DNS provider&lt;/li&gt;
  &lt;li&gt;RH OpenShift 3.11 ships with this&lt;/li&gt;
  &lt;li&gt;IPVS GA
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/07/09/ipvs-based-in-cluster-load-balancing-deep-dive/&quot;&gt;cluster ip deep dive&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cri-tools&lt;/code&gt; GA&lt;/li&gt;
  &lt;li&gt;pod priority and preemption
    &lt;ul&gt;
      &lt;li&gt;control scheduling policy for pod when it shares node with k8s control
plane&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;heapster deprecated
    &lt;ul&gt;
      &lt;li&gt;can be replaced by &lt;a href=&quot;https://github.com/kubernetes-incubator/metrics-server&quot;&gt;metrics server&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;etcd2 deprecated&lt;/li&gt;
  &lt;li&gt;external cloud provider BETA&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;112&quot;&gt;1.12&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;a lot of security related updates
    &lt;ul&gt;
      &lt;li&gt;certificate rotation&lt;/li&gt;
      &lt;li&gt;CIDR for network policy&lt;/li&gt;
      &lt;li&gt;mount space propogation&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;server side kubectl printing&lt;/li&gt;
  &lt;li&gt;egress support for network policy&lt;/li&gt;
  &lt;li&gt;beta:
    &lt;ul&gt;
      &lt;li&gt;quota priority by namespace&lt;/li&gt;
      &lt;li&gt;custom metrics in HPA&lt;/li&gt;
      &lt;li&gt;update plugin mechanism for kubectl&lt;/li&gt;
      &lt;li&gt;pod vertical scaling&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;alpha
    &lt;ul&gt;
      &lt;li&gt;runtimeClass: use different runtime&lt;/li&gt;
      &lt;li&gt;APIServer dry-run&lt;/li&gt;
      &lt;li&gt;volume snapshot&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mirantis.com/blog/whats-new-in-kubernetes-1-12-28-things-to-look-for/&quot;&gt;mirantis&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://rancher.com/blog/2018/2018-09-24-whats-new-in-kubernetes-1.12/?utm_campaign=Blog%202018&amp;amp;utm_content=77705466&amp;amp;utm_medium=social&amp;amp;utm_source=twitter&quot;&gt;rancher&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://itnext.io/horizontal-pod-autoscale-with-custom-metrics-8cb13e9d475&quot;&gt;itnext.io, hpa, metrics, prometheus&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;HPA with custom metrics&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;113&quot;&gt;1.13&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;CSI PV support GA
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2019/01/15/container-storage-interface-ga/&quot;&gt;link&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl diff&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;kubectl plugin moves into beta&lt;/li&gt;
  &lt;li&gt;CRD supports multi version schema&lt;/li&gt;
  &lt;li&gt;dry run mode and enabled by default&lt;/li&gt;
  &lt;li&gt;heapster retired&lt;/li&gt;
  &lt;li&gt;uses IPv6 friendly coredns&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/12/03/kubernetes-1-13-release-announcement/&quot;&gt;official blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;114&quot;&gt;1.14&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Windows server container support
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://cloudblogs.microsoft.com/opensource/2019/03/25/windows-server-containers-now-supported-kubernetes&quot;&gt;microsoft&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;graduated from beta to stable&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;kubectl
    &lt;ul&gt;
      &lt;li&gt;kustomize integrated&lt;/li&gt;
      &lt;li&gt;plugin mechanism updated&lt;/li&gt;
      &lt;li&gt;server side apply&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;runtime class beta&lt;/li&gt;
  &lt;li&gt;pod priority and preemption (GA, was beta in 1.11)
    &lt;ul&gt;
      &lt;li&gt;preemptive &lt;code class=&quot;highlighter-rouge&quot;&gt;NonPreemptingPriority&lt;/code&gt; will be available in 1.15&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/&quot;&gt;doc&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;create &lt;code class=&quot;highlighter-rouge&quot;&gt;kind: PriorityClass&lt;/code&gt;, add &lt;code class=&quot;highlighter-rouge&quot;&gt;priorityClassName&lt;/code&gt; to pod spec&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://grafana.com/blog/2019/07/24/how-a-production-outage-was-caused-using-kubernetes-pod-priorities/&quot;&gt;grafana incident&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;configurable resolv.conf in pod
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/enhancements/issues/504&quot;&gt;github issue&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ALPHA: provide environment variables expansion in sub path mount&lt;/li&gt;
  &lt;li&gt;ALPHA: In-tree storage plugin to CSI driver migration&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/enhancements/blob/master/keps/sig-storage/20190124-local-persistent-volumes.md#local-volume-initial-configuration&quot;&gt;something about local pv&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/whats-new-kubernetes-1-14/&quot;&gt;sysdig&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.kontena.io/kontena-pharos-2-4-released/&quot;&gt;kontena&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;part of their 2.4 release note&lt;/li&gt;
      &lt;li&gt;Support for HugePages&lt;/li&gt;
      &lt;li&gt;RuntimeClass (in beta), ability to select specific container runtimes for certain workloads&lt;/li&gt;
      &lt;li&gt;RunAsGroup to specify primary groups for the processes running inside the pod containers&lt;/li&gt;
      &lt;li&gt;Pod priority and preemption are graduating to stable&lt;/li&gt;
      &lt;li&gt;Pod ready++ to enhance pod readiness checks with possibly external view&lt;/li&gt;
      &lt;li&gt;Pid limiting&lt;/li&gt;
      &lt;li&gt;Configurable resolv.conf&lt;/li&gt;
      &lt;li&gt;Durable local storage management&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;115&quot;&gt;1.15&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;CRD pruning: removing fileds that are not in the validation schema&lt;/li&gt;
  &lt;li&gt;CRD defaulting: providing default value for missing fields&lt;/li&gt;
  &lt;li&gt;kubeadm now seamlessly rotating all your certificates (on upgrades) before they expire&lt;/li&gt;
  &lt;li&gt;go mod&lt;/li&gt;
  &lt;li&gt;preparing for removal of cloud-provider&lt;/li&gt;
  &lt;li&gt;Nodes now support third party monitoring plugins.&lt;/li&gt;
  &lt;li&gt;Pod Disruption Budget (PDB) into beta&lt;/li&gt;
  &lt;li&gt;node local DNS cache (Beta)&lt;/li&gt;
  &lt;li&gt;redisgn of event API (Alpha)&lt;/li&gt;
  &lt;li&gt;Add non-preempting option to PriorityClasses (Alpha)&lt;/li&gt;
  &lt;li&gt;Execution hooks&lt;/li&gt;
  &lt;li&gt;CSI: volume cloning (Alpha)
    &lt;ul&gt;
      &lt;li&gt;This new feature allows users to use another Persistent Volume Claim (PVC) as a “DataSource” when provisioning a new volume.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://relnotes.k8s.io/?releaseVersions=1.15.0&quot;&gt;new interactive release note format&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1Vc949C4iC2f8GTmjfJkX04VUNcbimhg8ujp1bUAjGK4/edit#gid=0&quot;&gt;google sheet for enhancement tracking&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blogs.vmware.com/cloudnative/2019/06/19/performance-bootstrapping-and-crds-in-kubernetes-1-15/&quot;&gt;vmware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/whats-new-kubernetes-1-15&quot;&gt;sysdig&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;quite a long list of interesting details&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;[—]
    &lt;ul&gt;
      &lt;li&gt;DaemonSet, Deployment, and ReplicaSet resources will no longer be served from extensions/v1beta1, apps/v1beta1, or apps/v1beta2 in v1.16. Migrate to the apps/v1 API, available since v1.9. Existing persisted data can be retrieved via the apps/v1 API.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cves&quot;&gt;CVEs&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;1.15.5: CVE-2019-11253&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;116&quot;&gt;1.16&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;GA: CRD, more strict
    &lt;ul&gt;
      &lt;li&gt;structural schemas&lt;/li&gt;
      &lt;li&gt;pruning unknown fields&lt;/li&gt;
      &lt;li&gt;validation&lt;/li&gt;
      &lt;li&gt;and protecting the *.k8s.io&lt;/li&gt;
      &lt;li&gt;CRD: &lt;code class=&quot;highlighter-rouge&quot;&gt;apiextensions.k8s.io/v1&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GA: admission hook&lt;/li&gt;
  &lt;li&gt;CSI, beta: volume resizing&lt;/li&gt;
  &lt;li&gt;CSI: feature parity with in-tree driver&lt;/li&gt;
  &lt;li&gt;API, beta: server side apply
    &lt;ul&gt;
      &lt;li&gt;moving &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl apply&lt;/code&gt; to server side&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;NET, Alpha: ipv4, ipv6 dual stack&lt;/li&gt;
  &lt;li&gt;STORE, Beta: volume cloning&lt;/li&gt;
  &lt;li&gt;metrics overhaul
    &lt;ul&gt;
      &lt;li&gt;seems might cause problems&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/enhancements/blob/master/keps/sig-instrumentation/20181106-kubernetes-metrics-overhaul.md&quot;&gt;keg&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;+, Alpha: Endpoint slice
    &lt;ul&gt;
      &lt;li&gt;alternative to Endpoint resources&lt;/li&gt;
      &lt;li&gt;seems to apply to a service with &lt;strong&gt;large amount&lt;/strong&gt; of pods&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;+, Alpha: Ephemeral containers
    &lt;ul&gt;
      &lt;li&gt;you can add regular containers to a pod after creation&lt;/li&gt;
      &lt;li&gt;no ports allowed&lt;/li&gt;
      &lt;li&gt;no health check&lt;/li&gt;
      &lt;li&gt;no resource&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/ephemeral-containers/&quot;&gt;official doc&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;API depractions (only beta version)
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;extensions/v1beta1&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;extensions/v1beta2&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;apps/v1beta2&lt;/code&gt; -&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;apps/v1&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;NetworkPolicy&lt;/li&gt;
      &lt;li&gt;PodSecurityPolicy&lt;/li&gt;
      &lt;li&gt;DaemonSet, Deployment, StatefulSet, and ReplicaSet&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;SelfLink&lt;/code&gt; removed from all objects&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2019/07/18/api-deprecations-in-1-16/&quot;&gt;more detail&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2019/09/18/kubernetes-1-16-release-announcement/&quot;&gt;k8s.io&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.16.md#v1160&quot;&gt;release note&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/whats-new-kubernetes-1-16/&quot;&gt;sysdig&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;117&quot;&gt;1.17&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;topology aware routing of service&lt;/li&gt;
  &lt;li&gt;kubeadm machine/structured output&lt;/li&gt;
  &lt;li&gt;IPv4/IPv6 support&lt;/li&gt;
  &lt;li&gt;taint node by condition&lt;/li&gt;
  &lt;li&gt;ALPHA: topology aware service routing
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;--feature-gates=&quot;ServiceTopology=true&quot;&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;BETA: EndpointSlice API&lt;/li&gt;
  &lt;li&gt;DEPRECATED:
    &lt;ul&gt;
      &lt;li&gt;default service cidr, added &lt;code class=&quot;highlighter-rouge&quot;&gt;--service-cluster-ip-range&lt;/code&gt; for api server&lt;/li&gt;
      &lt;li&gt;RBAC: alpha, beta moved to &lt;code class=&quot;highlighter-rouge&quot;&gt;rbac.authorization.k8s.io/v1&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/whats-new-kubernetes-1-17/&quot;&gt;sysdig&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2019/12/09/kubernetes-1-17-release-announcement/&quot;&gt;k8s.io&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.17.md#v1170&quot;&gt;changelog on github&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://relnotes.k8s.io/?releaseVersions=1.17.0&quot;&gt;relnote.k8s.io&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1ebKGsYB1TmMnkx86bR2ZDOibm5KWWCs_UjV3Ys71WIs/edit#gid=0&quot;&gt;enhancement tracking&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;118&quot;&gt;1.18&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1RtCvByYdcqWc6I_A1cKgeXT2tBS7SyHGvSt_DWXz270/edit#gid=936265414&quot;&gt;enhancement tracking&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://sysdig.com/blog/whats-new-kubernetes-1-18/&quot;&gt;sysdig&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;OIDC discovery&lt;/li&gt;
      &lt;li&gt;kubectl debug&lt;/li&gt;
      &lt;li&gt;kubectl diff&lt;/li&gt;
      &lt;li&gt;runtimeclass on Windows
        &lt;ul&gt;
          &lt;li&gt;with multiple Windows build support&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;ContainerD on Windows&lt;/li&gt;
      &lt;li&gt;runAsUser on Windows&lt;/li&gt;
      &lt;li&gt;kubeadm join on Windows&lt;/li&gt;
      &lt;li&gt;endpoint slice&lt;/li&gt;
      &lt;li&gt;IPv6 to beta&lt;/li&gt;
      &lt;li&gt;Ingress to beta&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.magalix.com/blog/kubernetes-1.18-what-you-should-know&quot;&gt;magalix&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;HPA velocity&lt;/li&gt;
      &lt;li&gt;Even Pod Scheduling (based on AZ)&lt;/li&gt;
      &lt;li&gt;kubectl debug&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cves-1&quot;&gt;CVEs&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;1.16.2: CVE-2019-11253&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;questions&quot;&gt;Questions&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;With a &lt;code class=&quot;highlighter-rouge&quot;&gt;hostPath&lt;/code&gt; volume, will it be removed when the POD dies?
    &lt;ul&gt;
      &lt;li&gt;no. looks like the stuff is retained&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;links-9&quot;&gt;Links&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/rosskukulinski/docker-philly&quot;&gt;intro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/minikube&quot;&gt;minikube&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;run k8s cluster on a single host&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.infoworld.com/article/3118345/cloud-computing/why-kubernetes-is-winning-the-container-war.html&quot;&gt;why kubernetes has won&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.slideshare.net/sttts/an-introduction-to-the-kubernetes-api-56804279?utm_source=slideshow&amp;amp;utm_medium=ssemail&amp;amp;utm_campaign=download_notification&quot;&gt;kubernetes api&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;explaine pods as docker commands, ipc, net, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/api-reference/v1/definitions/&quot;&gt;V1 API&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;official API doc for V1&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.risingstack.com/moving-node-js-from-paas-to-kubernetes-tutorial/&quot;&gt;ringstack&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;moving node js to k8s&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://kubernetes.io/docs/user-guide/walkthrough/&quot;&gt;walkthrough&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;official tutorial&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.gitbook.com/book/ramitsurana/awesome-kubernetes/details&quot;&gt;awesome&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;git book&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://k8s.info/cs.html&quot;&gt;cheatsheet&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/user-guide/kubectl-cheatsheet/&quot;&gt;official cheatsheet&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;from &lt;code class=&quot;highlighter-rouge&quot;&gt;kubernetes.io&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mirantis.com/blog/introduction-to-yaml-creating-a-kubernetes-deployment/&quot;&gt;marantis&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;introduction&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://5pi.de/2016/11/20/15-producation-grade-kubernetes-cluster/&quot;&gt;5pi&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;lengthy article on setting up production ready cluster&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/getting-started-guides/scratch/&quot;&gt;from scratch&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@zwischenzugs/learn-kubernetes-the-hard-way-the-easy-and-cheap-way-6f82b665ccd9&quot;&gt;cheap way&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://kube.news/&quot;&gt;kube news&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://kompose.io/&quot;&gt;kompose&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;convert, deploy docker compose stacks into k8s&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://rootsongjc.github.io/projects/kubernetes-installation-document/?from=timeline&amp;amp;isappinstalled=0&quot;&gt;rootsong&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;这可能是目前为止最详细的kubernetes安装文档了。&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/opsnull/follow-me-install-kubernetes-cluster&quot;&gt;markdown&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ubuntu.com/containers/kubernetes&quot;&gt;ubuntu&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Ubuntu Kubernetes distribution&lt;/li&gt;
      &lt;li&gt;supports local and remote cloud&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/pawankkamboj/HA-kubernetes-ansible&quot;&gt;HA with ansible&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;HA k8s with Ansible&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes-incubator/client-python&quot;&gt;python API&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mirantis.com/blog/kubernetes-replication-controller-replica-set-and-deployments-understanding-replication-options/&quot;&gt;marantis&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;RC, RS and Deployments&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.slideshare.net/WorksApplications/demystifying-kubernetes&quot;&gt;demystify&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;demystify kubernetes from slideshare&lt;/li&gt;
      &lt;li&gt;pretty detailed, ground-up explanation of kubernetes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://addops.cn/post/kubernetes-deployment-fileds.html&quot;&gt;qihu360&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;what can goes into deployment object&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tryk8s.com&quot;&gt;tryk8s&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;free k8s cluster to play with&lt;/li&gt;
      &lt;li&gt;login with github account&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/contrib/tree/master/service-loadbalancer&quot;&gt;service lb&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;provide loadbalancer service for bare metal&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.heptio.com/core-kubernetes-jazz-improv-over-orchestration-a7903ea92ca&quot;&gt;jazz improve&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;depth first article from CEO of heptio&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://coreos.com/kubernetes/docs/latest/deploy-master.html&quot;&gt;coreos deploy master&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.opcito.com/secure-kubernetes-clusters-rbac/&quot;&gt;rbac&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;securing kubernetes cluter with RBAC&lt;/li&gt;
      &lt;li&gt;compares to ABAC&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Mirantis/k8s-AppController&quot;&gt;app-controller&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;manages dependency&lt;/li&gt;
      &lt;li&gt;seems to create new kubernetes objects somehow &lt;code class=&quot;highlighter-rouge&quot;&gt;appcontroller.k8s/v1alpha1&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.feisky.xyz/&quot;&gt;feisky&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Chinese book on 1.6&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.kubernetes.io/2016/08/security-best-practices-kubernetes-deployment.html&quot;&gt;security best practice&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mantl&quot;&gt;mantl.io&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;integrated platform including a lot of stuff such as kubernetes, mesos&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloudnativelabs.github.io/post/2017-05-1-kube-network-policies/&quot;&gt;cloudnativelabs&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;enforcing kubernetes network with iptables&lt;/li&gt;
      &lt;li&gt;pseudo code for network policy operation, like adding to ipset&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kylemcc/kube-gen&quot;&gt;kube-gen&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;generate file based on k8s event and metadata&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/skippbox/kubewatch&quot;&gt;kubewatch&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;watch k8s resource and send notification to Slack channel&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.christianposta.com/kubernetes/3-day-docker-and-kubernetes-training/&quot;&gt;posta training&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;docker and kubernetes 4 day training by Christian Posta&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/azure/draft&quot;&gt;draft&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;a tool that scans source code and generate k8s objects&lt;/li&gt;
      &lt;li&gt;help geneartes Dockerfile, k8s YAML files, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/azure/brigade&quot;&gt;brigade, microsoft, javascript, event&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;k8s event driven scripting using Javascript&lt;/li&gt;
      &lt;li&gt;builds container pipelines&lt;/li&gt;
      &lt;li&gt;k8s native&lt;/li&gt;
      &lt;li&gt;requires helm&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=0Omvgd7Hg1I&quot;&gt;life of a packet&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;k8s networking video&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://speakerdeck.com/thockin/the-ins-and-outs-of-networking-in-google-container-engine&quot;&gt;speakerdeck&lt;/a&gt;
        &lt;ul&gt;
          &lt;li&gt;by the same guy and Tim Hockin&lt;/li&gt;
          &lt;li&gt;not actually for kubernetes but still useful&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://chrislovecnm.com/kubernetes/cni/choosing-a-cni-provider/&quot;&gt;which cni&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;comments on various CNI&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://jolestar.com/kubernetes-complete-course/&quot;&gt;jolestar training&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;video traingin given by a guy from Qingcloud&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/vyUi1V4pmYQr5_9T2Qqygg&quot;&gt;JDOS&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;JD custmization of kuberntes&lt;/li&gt;
      &lt;li&gt;a lot of high level information but still readable&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=0W49z8hVn0k&quot;&gt;borg to kubernetes&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Youtube video&lt;/li&gt;
      &lt;li&gt;The key point of kubernetes and Borg is: resource scheduling optimisation&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1LxSqBzjOxfGx3cmtZ4EbB_BGCxT_wlxW_xgHVVa23es/edit#gid=0&quot;&gt;distro&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;spreadsheet of k8s distributions&lt;/li&gt;
      &lt;li&gt;wise2c included&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1FCgqz1Ci7_VCz_wdh8vBitZ3giBtac_H8SBw4uxnrsE/edit#gid=0&quot;&gt;configuration management tools&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;like helm&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.heptio.com/introducing-heptio-kubernetes-subscription-5415052ef374&quot;&gt;heptio kubernetes subscription&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;integrated PaaS from heptio&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://gravitational.com/blog/kubernetes-release-cycle/#&quot;&gt;gravitational&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubernetes release cycle&lt;/li&gt;
      &lt;li&gt;LTS?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.slideshare.net/PhilEstes/whose-job-is-it-anyway-kubernetes-cri-container-runtimes/?mkt_tok=eyJpIjoiTWpabFpHWTVaRGc1WmpGaSIsInQiOiJjOVJqaHBiYTVDU3g0RkJjVjdnK3FvbHAxWGtVWmQ5RXB2MnJsUHZtMDJtdW9Oc0lTcmd4NUZ5c21qd3l4UnRpZ1wvZzZVRURtYkwwQjExeG85RkVHN244Q1lKM1d3OFlsUkNKQlNBNFhwZFZKeWd1UFRDeHBMV2tNNjBGMkp6b1MifQ%3D%3D&quot;&gt;container runtimes&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Whose Job is it anywa, CRI-O&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://resources.codeship.com/hubfs/Codeship_A-Roundup-of-Managed-Kubernetes-Platforms.pdf?t=1519673453469&quot;&gt;codeship&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;roundup of managed kubernetes platforms&lt;/li&gt;
      &lt;li&gt;PDF&lt;/li&gt;
      &lt;li&gt;GKE, openshift, Ubuntu, etc&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://schd.ws/hosted_files/lc3china2017/d1/Scale%20Kubernetes%20to%20Support%2050000%20Services%20-%202017%20China.pdf&quot;&gt;50000&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;scale kubernetes to 50000 services&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://schd.ws/hosted_files/lc3china2017/62/Fully%20Automated%20Kubernetes%20Deployment%20and%20Management.pdf&quot;&gt;rancher&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;PDF&lt;/li&gt;
      &lt;li&gt;talk by Jiang Peng&lt;/li&gt;
      &lt;li&gt;kubernetes upgrade&lt;/li&gt;
      &lt;li&gt;etc backup&lt;/li&gt;
      &lt;li&gt;health check&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://techbeacon.com/one-year-using-kubernetes-production-lessons-learned&quot;&gt;techbeacon&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;one year using kubernetes&lt;/li&gt;
      &lt;li&gt;run data service like MySQL and Mongo outside of kubernetes&lt;/li&gt;
      &lt;li&gt;cost: extra requirement of etcd, master nodes&lt;/li&gt;
      &lt;li&gt;logs sent directly from container themselves&lt;/li&gt;
      &lt;li&gt;published in 2016&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@ryandotclair/an-interrogation-of-metaparticle-and-abstraction-layers-44ba2fe07b62&quot;&gt;ryan&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;an interrogation of metaparticle&lt;/li&gt;
      &lt;li&gt;metaparticle: a leaky abstraction, breaks the law of sepration of concerns&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://resources.codeship.com/hubfs/TheNewStack_Book101_KubernetesSolutionsDirectory.pdf&quot;&gt;newstack codeship&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubernetes solution directory&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://coreos.com/blog/introducing-operators.html&quot;&gt;coreos operator&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;operator introduction&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://venturebeat.com/2018/05/05/everything-announced-at-kubecon-cloudnativecon-europe-2018/&quot;&gt;venturebeat&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubecon EU 2018 summary&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.objectif-libre.com/en/blog/2018/03/19/kubernetes-ipvs/&quot;&gt;objectif&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;ipvs and kubernetes&lt;/li&gt;
      &lt;li&gt;with a lot of pods on a host, ipvs performance much better than iptables: &lt;code class=&quot;highlighter-rouge&quot;&gt;O(1)&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://schd.ws/hosted_files/cloudnativeeu2017/ce/Scale%20Kubernetes%20to%20Support%2050000%20Services.pdf&quot;&gt;also see this pdf&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2018/05/24/kubernetes-containerd-integration-goes-ga/&quot;&gt;containerd&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kubernetes containerd integration goes GA&lt;/li&gt;
      &lt;li&gt;kubernetes 1.10 + containerd 1.1&lt;/li&gt;
      &lt;li&gt;performance gain&lt;/li&gt;
      &lt;li&gt;docker engine will use containerd in the future&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.openai.com/scaling-kubernetes-to-2500-nodes/&quot;&gt;openai&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;em&gt;scaling kubernetes to 2500 nodes&lt;/em&gt;&lt;/li&gt;
      &lt;li&gt;etcd: move from networked storage to local SSD&lt;/li&gt;
      &lt;li&gt;etcd: increase hard storage limit&lt;/li&gt;
      &lt;li&gt;scheduler: schedule pods to a single node as much as it can&lt;/li&gt;
      &lt;li&gt;kubelet: &lt;code class=&quot;highlighter-rouge&quot;&gt;--serialize-image-pulls=false&lt;/code&gt; to allow parallel image pull&lt;/li&gt;
      &lt;li&gt;docker: switch to overlay2&lt;/li&gt;
      &lt;li&gt;docker: move docker root to SSD&lt;/li&gt;
      &lt;li&gt;docker: max-concurrent-downloads option to 10&lt;/li&gt;
      &lt;li&gt;networking: &lt;code class=&quot;highlighter-rouge&quot;&gt;hostNetwork: true&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;dnsPolicy: ClusterFirstWithHostNet.&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;networking: increased ARP cache size&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/blogs/aws/amazon-eks-now-generally-available/&quot;&gt;eks&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;AWS EKS GA announcement&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.infoq.com/cn/presentations/different-ways-of-kubernetes-in-micro-service&quot;&gt;infoq&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;宁辉&lt;/li&gt;
      &lt;li&gt;mentions SR-IOV&lt;/li&gt;
      &lt;li&gt;kubernetes + IaaS&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloud.google.com/gke-on-prem/&quot;&gt;gke-on-perm&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;private GKE&lt;/li&gt;
      &lt;li&gt;announced July 2018&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kubeiql.io&quot;&gt;kubeiql&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;GraphQL interface for kubernetes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/BrandonPotter/kubergui&quot;&gt;kubergui&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;GitHub - BrandonPotter/kubergui: Kubernetes GUI YAML generators for simple but typo-prone tasks&lt;/li&gt;
      &lt;li&gt;HTML yaml generator&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.freshtracks.io/a-deep-dive-into-kubernetes-metrics-b190cc97f0f6&quot;&gt;freshtracks&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;a deep dive into kubernetes metrics (6 parts)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/txn2/kubefwd&quot;&gt;kubefwd&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;GitHub - txn2/kubefwd: Bulk port forwarding Kubernetes services for local development.&lt;/li&gt;
      &lt;li&gt;developer tool to forward all remote service from a namespace
transparently&lt;/li&gt;
      &lt;li&gt;access &lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt; to make sure local dev can access remote service with
same name&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://itnext.io/benchmark-results-of-kubernetes-network-plugins-cni-over-10gbit-s-network-36475925a560&quot;&gt;itnext&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;CNI benchmark over 10G&lt;/li&gt;
      &lt;li&gt;calico, flannel, cilium, weave, canal&lt;/li&gt;
      &lt;li&gt;calico is good, cilium is confusingly bad&lt;/li&gt;
      &lt;li&gt;jumbo frame activated (MTU 9000) - MTU matters&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cloudatomiclab.com/rustyk8s/&quot;&gt;rust, api&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;somebody is starting to write a k8s API with Rust&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/tinder-engineering/tinders-move-to-kubernetes-cda2a6372f44&quot;&gt;tinder, production, scale&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;report from Tinder on moving to kubernetes&lt;/li&gt;
      &lt;li&gt;cluster size, flannel optimisation, dns problem, using envoy to fix HTTP Keepalive&lt;/li&gt;
      &lt;li&gt;200 services, 1,000 nodes, 15,000 pods, and 48,000 running containers.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/presentation/d/13EQKZSQDounPC1I6EC4PmqaRmdCrpT3qswQJz9KRCyE/mobilepresent?slide=id.gd9c453428_0_16&quot;&gt;google docs, cka&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;lengthy google spreadsheet with training material&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/openkruise/kruise&quot;&gt;alibaba, open source, kruise&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Advanced StatefulSet, BroadcastJob, and SidecarSet open sourced by Alibaba&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/community/blob/master/contributors/design-proposals/release/versioning.md&quot;&gt;release, support&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Kubernetes Release Versioning&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;Furthermore, we expect to “support” three minor releases at a time.&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://discuss.kubernetes.io&quot;&gt;discuss&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;discuss&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/drawings/d/1MtWL8qRTs6PlnJrW4dh8135_S9e2SaawT410bJuoBPk/edit&quot;&gt;tim hockin, kube-proxy, diagram&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;kube-proxy NAT iptable flow&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/arashkaffamanesh/kubeadm-multipass&quot;&gt;github, multipass, install&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Multi-Node Kubernetes 1.17 with kubeadm on local multipass cloud with Docker, Containerd or CRI-O and Rancher Server on top&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1WPHt0gsb7adVzY3eviMK2W8LejV0I5m_Zpc8tMzl_2w/edit#gid=0&quot;&gt;golden, tools, google&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;The Golden Kubernetes Tooling and Helpers list&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1LxSqBzjOxfGx3cmtZ4EbB_BGCxT_wlxW_xgHVVa23es/edit#gid=0&quot;&gt;sheet, google, wise2c&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Google sheet with all distributions, including two from wise2c&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/ewohltman/kubecon2019&quot;&gt;kubecon 2019&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Notes from KubeCon and EnvoyCon 2019.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;poc&quot;&gt;POC&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://5pi.de/2016/11/20/15-producation-grade-kubernetes-cluster/&quot;&gt;5pi&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://chenjian158978.github.io/chenjian.github.io/2017/12/08/Deploy-K8s-by-Kebeadm-on-Linux/&quot;&gt;jimmy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/u013127762/article/details/54340485&quot;&gt;csdn&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;image mismatch problem&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">General backed by google and has a long history (in container’s term) currently managed by Linux foundation google also provide GKE (Google Container Engine) built on top of it supports both docker and rtk bad UI container-agnostic orchestration system docker is one of the supported run-time and currently the only one officially documentation is sub par but Slack and Stackoverflow community is very active apache license kubernetes/LICENSE at master · kubernetes/kubernetes · GitHub GFW, Aliyun repo: registry.cn-hangzhou.aliyuncs.com/google_containers quarterly release cycle</summary></entry><entry><title type="html">On Agile</title><link href="https://wzhliang.github.io/myfastpage/markdown/2020/03/03/agile-notes.html" rel="alternate" type="text/html" title="On Agile" /><published>2020-03-03T00:00:00-06:00</published><updated>2020-03-03T00:00:00-06:00</updated><id>https://wzhliang.github.io/myfastpage/markdown/2020/03/03/agile-notes</id><content type="html" xml:base="https://wzhliang.github.io/myfastpage/markdown/2020/03/03/agile-notes.html">&lt;h1 id=&quot;general&quot;&gt;General&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;a lot of people think Agile is mainly about project management, but the
creators of Agile put equal if not greater emphasis on engineering as well.&lt;/li&gt;
  &lt;li&gt;the software craftsmanship movement preserves the coupling between practices
and culture by emphasizing that technical practices are important for agile to
be successful.&lt;/li&gt;
  &lt;li&gt;For any behavior change, people learn first by practicing, and then learn to
relate their practices back to principles and values.&lt;/li&gt;
  &lt;li&gt;Agile is about doing the most valuable thing at any given moment.&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Produce running, tested, working, integrated software every two weeks, every week. Build your skills until you can create a new fully operational version every day, twice a day, multiple times a day.&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Agile is a set of values and principles generalized from the practices of several similar methodologies. Agile does not define any particular practices; but it has no meaning without them. Agile is the abstract class. Practices are the implementation.&lt;/em&gt;
    &lt;ul&gt;
      &lt;li&gt;Bob Martin on twitter&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;PBI: product backlog items&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;extreme-programming&quot;&gt;Extreme Programming&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;invented by Kent Beck&lt;/li&gt;
  &lt;li&gt;prior to scrum&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/scrum-and-xp&quot;&gt;dzone&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;scrum and xp&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;This book shows readers how to use Scrum, and Agile software development process, to quickly and seamlessly implement XP in their shops while still producing actual software. Using Scrum in the Agile process can virtually eliminate all downtime during an XP implementation.&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;12-practices&quot;&gt;12 Practices&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;The Planning Game&lt;/li&gt;
  &lt;li&gt;Small Releases&lt;/li&gt;
  &lt;li&gt;Metaphore&lt;/li&gt;
  &lt;li&gt;Simple Design&lt;/li&gt;
  &lt;li&gt;Testing&lt;/li&gt;
  &lt;li&gt;Refactoring&lt;/li&gt;
  &lt;li&gt;Pair Programming&lt;/li&gt;
  &lt;li&gt;Collective Ownership&lt;/li&gt;
  &lt;li&gt;Continuous Integration&lt;/li&gt;
  &lt;li&gt;40-Hour Workweek&lt;/li&gt;
  &lt;li&gt;On-site Customer&lt;/li&gt;
  &lt;li&gt;Coding Standards&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;code-smells&quot;&gt;Code Smells&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/soft-skill/code-smells.png” width=75%&amp;gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;scrum&quot;&gt;Scrum&lt;/h1&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/devops/scrum.png” width=65%&amp;gt;&lt;/p&gt;

&lt;h2 id=&quot;terms&quot;&gt;Terms&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;burndown - how much work is remaining to be done&lt;/li&gt;
  &lt;li&gt;burnup - how much work has been completed&lt;/li&gt;
  &lt;li&gt;DRE - defect removal efficiency
    &lt;ul&gt;
      &lt;li&gt;DRE is the percentage of bugs identified and corrected internally compared to the total bugs in the complete release life cycle.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CSAT - customer satisfaction&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;user-story-map&quot;&gt;User Story Map&lt;/h2&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/devops/user-story-mapping-3.png” width=75%&amp;gt;&lt;/p&gt;

&lt;p&gt;User story mapping is a technique developed by Jeff Patton during his long practice as an Agile product owner/scrum master. A story map received its name because it helps map out user stories and other backlog items visually. Items are arranged in two dimensions: The vertical one denotes priority, while the horizontal one represents steps a user takes to perform actions in the system (user journey).&lt;/p&gt;

&lt;h1 id=&quot;code-review&quot;&gt;Code Review&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/4-types-of-code-reviews-any-professional-developer&quot;&gt;dzone&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;4 types of code review&lt;/li&gt;
      &lt;li&gt;suggests async by default&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://smartbear.com/learn/code-review/guide-to-code-review-process/&quot;&gt;smartbear&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;general&lt;/li&gt;
      &lt;li&gt;performance&lt;/li&gt;
      &lt;li&gt;security&lt;/li&gt;
      &lt;li&gt;documentation&lt;/li&gt;
      &lt;li&gt;testing&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.atlassian.com/agile/software-development/code-reviews&quot;&gt;atlassian&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dev.to/codemouse92/10-principles-of-a-good-code-review-2eg&quot;&gt;dev.to&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;practical principles of code review&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://nyu-cds.github.io/effective-code-reviews/03-checklist/&quot;&gt;nyu&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;effective code review check list&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/SonarSource/sonar-go&quot;&gt;sonar-go&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;replaces community plugin since May 2018&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/joho/awesome-code-review&quot;&gt;awesome code review&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.jboss.org/dms/judcon/presentations/Boston2011/JUDConBoston2011_day1track2session6.pdf&quot;&gt;jboss&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;slides about git but has 2 pages on code review&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kellysutton.com/2018/10/08/8-tips-for-great-code-reviews.html&quot;&gt;tips, 8&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;em&gt;Latency is Key&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;goals&quot;&gt;Goals&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;goal
    &lt;ul&gt;
      &lt;li&gt;catch bug&lt;/li&gt;
      &lt;li&gt;share knowledge&lt;/li&gt;
      &lt;li&gt;increase readbility&lt;/li&gt;
      &lt;li&gt;increase communication&lt;/li&gt;
      &lt;li&gt;learn, mentorship&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;non goal
    &lt;ul&gt;
      &lt;li&gt;i am smarter than you&lt;/li&gt;
      &lt;li&gt;i write better code&lt;/li&gt;
      &lt;li&gt;you suck!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;best-practices&quot;&gt;Best Practices&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;self review by author him/her self&lt;/li&gt;
  &lt;li&gt;patch size matters
    &lt;ul&gt;
      &lt;li&gt;400 lines or less, otherwise breaks into smaller commits&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;time matters
    &lt;ul&gt;
      &lt;li&gt;60 minutes or less&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;think of all scenarios&lt;/li&gt;
  &lt;li&gt;golang: separate vendor commit and actual change&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;what-to-review&quot;&gt;What to Review&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;logic error&lt;/li&gt;
  &lt;li&gt;correct and full understanding of requirements&lt;/li&gt;
  &lt;li&gt;design: easy to implement, easy to understand
    &lt;ul&gt;
      &lt;li&gt;ask questions, discuss them!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;test: is there unit test that can be added?&lt;/li&gt;
  &lt;li&gt;style: does the code conform to existing style
    &lt;ul&gt;
      &lt;li&gt;var name&lt;/li&gt;
      &lt;li&gt;comments adequte&lt;/li&gt;
      &lt;li&gt;function complexity?&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;unchecked return value&lt;/li&gt;
  &lt;li&gt;are all input checked?&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;user-story&quot;&gt;User Story&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;User Story is a small (actually, the smallest) piece of work that represents some value to an end user and can be delivered during a sprint.&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;template
    &lt;ul&gt;
      &lt;li&gt;“As a [persona], I [want to], [so that].”&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Epics&lt;/strong&gt; are large work items broken down into a set of stories, and multiple epics comprise an &lt;strong&gt;initiative.&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Epics are not testable, otherwise, user stories should be testable
    &lt;ul&gt;
      &lt;li&gt;with the exception of non-funcitonal stories&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;INVEST
    &lt;ul&gt;
      &lt;li&gt;independent&lt;/li&gt;
      &lt;li&gt;negotiable&lt;/li&gt;
      &lt;li&gt;valuable&lt;/li&gt;
      &lt;li&gt;estimable&lt;/li&gt;
      &lt;li&gt;small&lt;/li&gt;
      &lt;li&gt;testable&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.atlassian.com/agile/project-management/user-stories&quot;&gt;atlassian&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;apparently Atlassian knows something about user stories&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stormotion.io/blog/how-to-write-a-good-user-story-with-examples-templates/&quot;&gt;stormotion&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;nice introduction article&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;scaling-agile&quot;&gt;Scaling Agile&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;LeSS - large scale scrum
    &lt;ul&gt;
      &lt;li&gt;Sprint Planning, Sprint Review and Sprint Retrospective runs at the same time for all teams.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;culture&quot;&gt;Culture&lt;/h1&gt;

&lt;h2 id=&quot;team-culture&quot;&gt;Team Culture&lt;/h2&gt;
&lt;p&gt;&amp;lt;img src=”http://borlandc.pek3b.qingstor.com/devops/team-culture.jpeg” width=75%&amp;gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;by a guy from Windows NT team&lt;/li&gt;
  &lt;li&gt;referenced by Dave Chaney &lt;a href=&quot;https://dave.cheney.net/2020/02/23/the-zen-of-go&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;links&quot;&gt;Links&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.com/news/2018/06/developers-should-abandon-agile&quot;&gt;infoq&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;Ron Jeffries says developers should abandon Agile&lt;/li&gt;
      &lt;li&gt;Faux Agile, Dark Agile&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ronjeffries.com/articles/018-01ff/abandon-1/&quot;&gt;ronjeffries&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;developers abandon Agile&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://agilemanifesto.org&quot;&gt;the manifestor&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.wikiwand.com/en/Agile_software_development&quot;&gt;wikipedia&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2018/08/28/CraftsmanshipMovement.html&quot;&gt;cleancoder&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;agile vs manager&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.com/articles/scrum-multiple-teams-frameworks&quot;&gt;infoq&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;multiple teams scrum framework&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.slideshare.net/jexp/refactoring-2nd-edition&quot;&gt;refactoring 2nd ed&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;slides on refactoring 2nd edition&lt;/li&gt;
      &lt;li&gt;by one of the book reviewer&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://martinfowler.com/articles/agile-aus-2018.html&quot;&gt;martin, 2018, aus&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;the state of agile in 2018&lt;/li&gt;
      &lt;li&gt;a talk Martin Fowler given in Austrilia&lt;/li&gt;
      &lt;li&gt;summary:
        &lt;ol&gt;
          &lt;li&gt;Get rid of the Agile Industrial Complex and the idea of imposing stuff on teams. Let teams work out the way they should work themselves.&lt;/li&gt;
          &lt;li&gt;Raise the importance of technical excellence, and never forget that when writing software, the technology side is really vital&lt;/li&gt;
          &lt;li&gt;and organize around products.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.infoq.com/articles/metrics-agile-teams&quot;&gt;infoq, metrics&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;The Importance of Metrics to Agile Teams&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;Firstly, the reporting found within common workflow management tools like Jira is not optimised to provide the level of reporting that many teams require for an effective SI programme.&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">General a lot of people think Agile is mainly about project management, but the creators of Agile put equal if not greater emphasis on engineering as well. the software craftsmanship movement preserves the coupling between practices and culture by emphasizing that technical practices are important for agile to be successful. For any behavior change, people learn first by practicing, and then learn to relate their practices back to principles and values. Agile is about doing the most valuable thing at any given moment. Produce running, tested, working, integrated software every two weeks, every week. Build your skills until you can create a new fully operational version every day, twice a day, multiple times a day. Agile is a set of values and principles generalized from the practices of several similar methodologies. Agile does not define any particular practices; but it has no meaning without them. Agile is the abstract class. Practices are the implementation. Bob Martin on twitter PBI: product backlog items</summary></entry><entry><title type="html">Fastpages Notebook Blog Post</title><link href="https://wzhliang.github.io/myfastpage/jupyter/2020/02/20/test.html" rel="alternate" type="text/html" title="Fastpages Notebook Blog Post" /><published>2020-02-20T00:00:00-06:00</published><updated>2020-02-20T00:00:00-06:00</updated><id>https://wzhliang.github.io/myfastpage/jupyter/2020/02/20/test</id><content type="html" xml:base="https://wzhliang.github.io/myfastpage/jupyter/2020/02/20/test.html">&lt;!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-02-20-test.ipynb
--&gt;

&lt;div class=&quot;container&quot; id=&quot;notebook-container&quot;&gt;
        
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h1 id=&quot;About&quot;&gt;About&lt;a class=&quot;anchor-link&quot; href=&quot;#About&quot;&gt; &lt;/a&gt;&lt;/h1&gt;&lt;p&gt;This notebook is a demonstration of some of capabilities of &lt;a href=&quot;https://github.com/fastai/fastpages&quot;&gt;fastpages&lt;/a&gt; with notebooks.&lt;/p&gt;
&lt;p&gt;With &lt;code&gt;fastpages&lt;/code&gt; you can save your jupyter notebooks into the &lt;code&gt;_notebooks&lt;/code&gt; folder at the root of your repository, and they will be automatically be converted to Jekyll compliant blog posts!&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Front-Matter&quot;&gt;Front Matter&lt;a class=&quot;anchor-link&quot; href=&quot;#Front-Matter&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;The first cell in your Jupyter Notebook or markdown blog post contains front matter. Front matter is metadata that can turn on/off options in your Notebook. It is formatted like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Title
&amp;gt; Awesome summary

- toc: true- branch: master- badges: true- comments: true
- author: Hamel Husain &amp;amp; Jeremy Howard
- categories: [fastpages, jupyter]&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Setting &lt;code&gt;toc: true&lt;/code&gt; will automatically generate a table of contents&lt;/li&gt;
&lt;li&gt;Setting &lt;code&gt;badges: true&lt;/code&gt; will automatically include GitHub and Google Colab links to your notebook.&lt;/li&gt;
&lt;li&gt;Setting &lt;code&gt;comments: true&lt;/code&gt; will enable commenting on your blog post, powered by &lt;a href=&quot;https://github.com/utterance/utterances&quot;&gt;utterances&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;More details and options for front matter can be viewed on the &lt;a href=&quot;https://github.com/fastai/fastpages#front-matter-related-options&quot;&gt;front matter section&lt;/a&gt; of the README.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Markdown-Shortcuts&quot;&gt;Markdown Shortcuts&lt;a class=&quot;anchor-link&quot; href=&quot;#Markdown-Shortcuts&quot;&gt; &lt;/a&gt;&lt;/h2&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;A &lt;code&gt;#hide&lt;/code&gt; comment at the top of any code cell will hide &lt;strong&gt;both the input and output&lt;/strong&gt; of that cell in your blog post.&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;#hide_input&lt;/code&gt; comment at the top of any code cell will &lt;strong&gt;only hide the input&lt;/strong&gt; of that cell.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;

&lt;div class=&quot;output_subarea output_stream output_stdout output_text&quot;&gt;
&lt;pre&gt;The comment #hide_input was used to hide the code that produced this.
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;put a &lt;code&gt;#collapse-hide&lt;/code&gt; flag at the top of any cell if you want to &lt;strong&gt;hide&lt;/strong&gt; that cell by default, but give the reader the option to show it:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;details class=&quot;description&quot;&gt;
      &lt;summary class=&quot;btn btn-sm&quot; data-open=&quot;Hide Code&quot; data-close=&quot;Show Code&quot;&gt;&lt;/summary&gt;
        &lt;p&gt;&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#collapse-hide&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pandas&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pd&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;altair&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;alt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/p&gt;
    &lt;/details&gt;
&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;put a &lt;code&gt;#collapse-show&lt;/code&gt; flag at the top of any cell if you want to &lt;strong&gt;show&lt;/strong&gt; that cell by default, but give the reader the option to hide it:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;details class=&quot;description&quot; open=&quot;&quot;&gt;
      &lt;summary class=&quot;btn btn-sm&quot; data-open=&quot;Hide Code&quot; data-close=&quot;Show Code&quot;&gt;&lt;/summary&gt;
        &lt;p&gt;&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#collapse-show&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cars&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://vega.github.io/vega-datasets/data/cars.json&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;movies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://vega.github.io/vega-datasets/data/movies.json&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sp500&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://vega.github.io/vega-datasets/data/sp500.csv&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stocks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://vega.github.io/vega-datasets/data/stocks.csv&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;flights&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://vega.github.io/vega-datasets/data/flights-5k.json&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/p&gt;
    &lt;/details&gt;
&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Interactive-Charts-With-Altair&quot;&gt;Interactive Charts With Altair&lt;a class=&quot;anchor-link&quot; href=&quot;#Interactive-Charts-With-Altair&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Charts made with Altair remain interactive.  Example charts taken from &lt;a href=&quot;https://github.com/uwdata/visualization-curriculum&quot;&gt;this repo&lt;/a&gt;, specifically &lt;a href=&quot;https://github.com/uwdata/visualization-curriculum/blob/master/altair_interaction.ipynb&quot;&gt;this notebook&lt;/a&gt;.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h3 id=&quot;Example-1:-DropDown&quot;&gt;Example 1: DropDown&lt;a class=&quot;anchor-link&quot; href=&quot;#Example-1:-DropDown&quot;&gt; &lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# single-value selection over [Major_Genre, MPAA_Rating] pairs&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# use specific hard-wired values as the initial selected values&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;selection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selection_single&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Select&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Major_Genre&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MPAA_Rating&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Major_Genre&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Drama&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MPAA_Rating&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;R&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Major_Genre&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binding_select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;genres&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MPAA_Rating&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binding_radio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mpaa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;c1&quot;&gt;# scatter plot, modify opacity based on selection&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Chart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;movies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_circle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_selection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;selection&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Rotten_Tomatoes_Rating:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;IMDB_Rating:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tooltip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Title:N&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;opacity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.05&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;


&lt;div class=&quot;output_html rendered_html output_subarea output_execute_result&quot;&gt;

&lt;div id=&quot;altair-viz-1a49e83878ce4d678d7b162f3d6b510f&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  (function(spec, embedOpt){
    const outputDiv = document.getElementById(&quot;altair-viz-1a49e83878ce4d678d7b162f3d6b510f&quot;);
    const paths = {
      &quot;vega&quot;: &quot;https://cdn.jsdelivr.net/npm//vega@5?noext&quot;,
      &quot;vega-lib&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-lib?noext&quot;,
      &quot;vega-lite&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-lite@4.0.2?noext&quot;,
      &quot;vega-embed&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-embed@6?noext&quot;,
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () =&gt; resolve(paths[lib]);
        s.onerror = () =&gt; reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName(&quot;head&quot;)[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `&lt;div class=&quot;error&quot; style=&quot;color:red;&quot;&gt;${err}&lt;/div&gt;`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err =&gt; showError(`Javascript Error: ${err.message}&lt;br&gt;This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === &quot;function&quot; &amp;&amp; define.amd) {
      requirejs.config({paths});
      require([&quot;vega-embed&quot;], displayChart, err =&gt; showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === &quot;function&quot;) {
      displayChart(vegaEmbed);
    } else {
      loadScript(&quot;vega&quot;)
        .then(() =&gt; loadScript(&quot;vega-lite&quot;))
        .then(() =&gt; loadScript(&quot;vega-embed&quot;))
        .catch(showError)
        .then(() =&gt; displayChart(vegaEmbed));
    }
  })({&quot;config&quot;: {&quot;view&quot;: {&quot;continuousWidth&quot;: 400, &quot;continuousHeight&quot;: 300}}, &quot;data&quot;: {&quot;url&quot;: &quot;https://vega.github.io/vega-datasets/data/movies.json&quot;}, &quot;mark&quot;: &quot;circle&quot;, &quot;encoding&quot;: {&quot;opacity&quot;: {&quot;condition&quot;: {&quot;value&quot;: 0.75, &quot;selection&quot;: &quot;Select&quot;}, &quot;value&quot;: 0.05}, &quot;tooltip&quot;: {&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;Title&quot;}, &quot;x&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;Rotten_Tomatoes_Rating&quot;}, &quot;y&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;IMDB_Rating&quot;}}, &quot;selection&quot;: {&quot;Select&quot;: {&quot;type&quot;: &quot;single&quot;, &quot;fields&quot;: [&quot;Major_Genre&quot;, &quot;MPAA_Rating&quot;], &quot;init&quot;: {&quot;Major_Genre&quot;: &quot;Drama&quot;, &quot;MPAA_Rating&quot;: &quot;R&quot;}, &quot;bind&quot;: {&quot;Major_Genre&quot;: {&quot;input&quot;: &quot;select&quot;, &quot;options&quot;: [&quot;Action&quot;, &quot;Adventure&quot;, &quot;Black Comedy&quot;, &quot;Comedy&quot;, &quot;Concert/Performance&quot;, &quot;Documentary&quot;, &quot;Drama&quot;, &quot;Horror&quot;, &quot;Musical&quot;, &quot;Romantic Comedy&quot;, &quot;Thriller/Suspense&quot;, &quot;Western&quot;]}, &quot;MPAA_Rating&quot;: {&quot;input&quot;: &quot;radio&quot;, &quot;options&quot;: [&quot;G&quot;, &quot;PG&quot;, &quot;PG-13&quot;, &quot;R&quot;, &quot;NC-17&quot;, &quot;Not Rated&quot;]}}}}, &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v4.0.2.json&quot;}, {&quot;mode&quot;: &quot;vega-lite&quot;});
&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h3 id=&quot;Example-2:-Tooltips&quot;&gt;Example 2: Tooltips&lt;a class=&quot;anchor-link&quot; href=&quot;#Example-2:-Tooltips&quot;&gt; &lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Chart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;movies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_circle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_selection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selection_interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;scales&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encodings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Rotten_Tomatoes_Rating:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;IMDB_Rating:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Axis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minExtent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# use min extent to stabilize axis title placement&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tooltip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Title:N&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Release_Date:N&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;IMDB_Rating:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Rotten_Tomatoes_Rating:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;400&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;


&lt;div class=&quot;output_html rendered_html output_subarea output_execute_result&quot;&gt;

&lt;div id=&quot;altair-viz-c022b476f4fb482ca6f609bf6ed082d2&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  (function(spec, embedOpt){
    const outputDiv = document.getElementById(&quot;altair-viz-c022b476f4fb482ca6f609bf6ed082d2&quot;);
    const paths = {
      &quot;vega&quot;: &quot;https://cdn.jsdelivr.net/npm//vega@5?noext&quot;,
      &quot;vega-lib&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-lib?noext&quot;,
      &quot;vega-lite&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-lite@4.0.2?noext&quot;,
      &quot;vega-embed&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-embed@6?noext&quot;,
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () =&gt; resolve(paths[lib]);
        s.onerror = () =&gt; reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName(&quot;head&quot;)[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `&lt;div class=&quot;error&quot; style=&quot;color:red;&quot;&gt;${err}&lt;/div&gt;`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err =&gt; showError(`Javascript Error: ${err.message}&lt;br&gt;This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === &quot;function&quot; &amp;&amp; define.amd) {
      requirejs.config({paths});
      require([&quot;vega-embed&quot;], displayChart, err =&gt; showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === &quot;function&quot;) {
      displayChart(vegaEmbed);
    } else {
      loadScript(&quot;vega&quot;)
        .then(() =&gt; loadScript(&quot;vega-lite&quot;))
        .then(() =&gt; loadScript(&quot;vega-embed&quot;))
        .catch(showError)
        .then(() =&gt; displayChart(vegaEmbed));
    }
  })({&quot;config&quot;: {&quot;view&quot;: {&quot;continuousWidth&quot;: 400, &quot;continuousHeight&quot;: 300}}, &quot;data&quot;: {&quot;url&quot;: &quot;https://vega.github.io/vega-datasets/data/movies.json&quot;}, &quot;mark&quot;: &quot;circle&quot;, &quot;encoding&quot;: {&quot;tooltip&quot;: [{&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;Title&quot;}, {&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;Release_Date&quot;}, {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;IMDB_Rating&quot;}, {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;Rotten_Tomatoes_Rating&quot;}], &quot;x&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;Rotten_Tomatoes_Rating&quot;}, &quot;y&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;axis&quot;: {&quot;minExtent&quot;: 30}, &quot;field&quot;: &quot;IMDB_Rating&quot;}}, &quot;height&quot;: 400, &quot;selection&quot;: {&quot;selector001&quot;: {&quot;type&quot;: &quot;interval&quot;, &quot;bind&quot;: &quot;scales&quot;, &quot;encodings&quot;: [&quot;x&quot;]}}, &quot;width&quot;: 600, &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v4.0.2.json&quot;}, {&quot;mode&quot;: &quot;vega-lite&quot;});
&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h3 id=&quot;Example-3:-More-Tooltips&quot;&gt;Example 3: More Tooltips&lt;a class=&quot;anchor-link&quot; href=&quot;#Example-3:-More-Tooltips&quot;&gt; &lt;/a&gt;&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# select a point for which to provide details-on-demand&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selection_single&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;encodings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;x&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# limit selection to x-axis value&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;mouseover&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# select on mouseover events&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nearest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# select data point nearest the cursor&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;empty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;none&amp;#39;&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# empty selection includes no data points&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# define our base line chart of stock prices&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;base&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Chart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;date:T&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;price:Q&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;log&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;symbol:N&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# base line chart&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;# add a rule mark to serve as a guide line&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Chart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_rule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;#aaa&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;date:T&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform_filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;# add circle marks for selected time points, hide unselected points&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_circle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;opacity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_selection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# add white stroked text to provide a legible background for labels&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;align&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;white&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strokeWidth&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;price:Q&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform_filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# add text labels for stock prices&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mark_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;align&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;left&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;price:Q&amp;#39;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform_filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stocks&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;400&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;


&lt;div class=&quot;output_html rendered_html output_subarea output_execute_result&quot;&gt;

&lt;div id=&quot;altair-viz-9283d3681fd24aafa3d1e2f9ad193ecf&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  (function(spec, embedOpt){
    const outputDiv = document.getElementById(&quot;altair-viz-9283d3681fd24aafa3d1e2f9ad193ecf&quot;);
    const paths = {
      &quot;vega&quot;: &quot;https://cdn.jsdelivr.net/npm//vega@5?noext&quot;,
      &quot;vega-lib&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-lib?noext&quot;,
      &quot;vega-lite&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-lite@4.0.2?noext&quot;,
      &quot;vega-embed&quot;: &quot;https://cdn.jsdelivr.net/npm//vega-embed@6?noext&quot;,
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () =&gt; resolve(paths[lib]);
        s.onerror = () =&gt; reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName(&quot;head&quot;)[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `&lt;div class=&quot;error&quot; style=&quot;color:red;&quot;&gt;${err}&lt;/div&gt;`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err =&gt; showError(`Javascript Error: ${err.message}&lt;br&gt;This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === &quot;function&quot; &amp;&amp; define.amd) {
      requirejs.config({paths});
      require([&quot;vega-embed&quot;], displayChart, err =&gt; showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === &quot;function&quot;) {
      displayChart(vegaEmbed);
    } else {
      loadScript(&quot;vega&quot;)
        .then(() =&gt; loadScript(&quot;vega-lite&quot;))
        .then(() =&gt; loadScript(&quot;vega-embed&quot;))
        .catch(showError)
        .then(() =&gt; displayChart(vegaEmbed));
    }
  })({&quot;config&quot;: {&quot;view&quot;: {&quot;continuousWidth&quot;: 400, &quot;continuousHeight&quot;: 300}}, &quot;layer&quot;: [{&quot;mark&quot;: &quot;line&quot;, &quot;encoding&quot;: {&quot;color&quot;: {&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;symbol&quot;}, &quot;x&quot;: {&quot;type&quot;: &quot;temporal&quot;, &quot;field&quot;: &quot;date&quot;}, &quot;y&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;price&quot;, &quot;scale&quot;: {&quot;type&quot;: &quot;log&quot;}}}}, {&quot;mark&quot;: {&quot;type&quot;: &quot;rule&quot;, &quot;color&quot;: &quot;#aaa&quot;}, &quot;encoding&quot;: {&quot;x&quot;: {&quot;type&quot;: &quot;temporal&quot;, &quot;field&quot;: &quot;date&quot;}}, &quot;transform&quot;: [{&quot;filter&quot;: {&quot;selection&quot;: &quot;selector002&quot;}}]}, {&quot;mark&quot;: &quot;circle&quot;, &quot;encoding&quot;: {&quot;color&quot;: {&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;symbol&quot;}, &quot;opacity&quot;: {&quot;condition&quot;: {&quot;value&quot;: 1, &quot;selection&quot;: &quot;selector002&quot;}, &quot;value&quot;: 0}, &quot;x&quot;: {&quot;type&quot;: &quot;temporal&quot;, &quot;field&quot;: &quot;date&quot;}, &quot;y&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;price&quot;, &quot;scale&quot;: {&quot;type&quot;: &quot;log&quot;}}}, &quot;selection&quot;: {&quot;selector002&quot;: {&quot;type&quot;: &quot;single&quot;, &quot;encodings&quot;: [&quot;x&quot;], &quot;on&quot;: &quot;mouseover&quot;, &quot;nearest&quot;: true, &quot;empty&quot;: &quot;none&quot;}}}, {&quot;mark&quot;: {&quot;type&quot;: &quot;text&quot;, &quot;align&quot;: &quot;left&quot;, &quot;dx&quot;: 5, &quot;dy&quot;: -5, &quot;stroke&quot;: &quot;white&quot;, &quot;strokeWidth&quot;: 2}, &quot;encoding&quot;: {&quot;color&quot;: {&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;symbol&quot;}, &quot;text&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;price&quot;}, &quot;x&quot;: {&quot;type&quot;: &quot;temporal&quot;, &quot;field&quot;: &quot;date&quot;}, &quot;y&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;price&quot;, &quot;scale&quot;: {&quot;type&quot;: &quot;log&quot;}}}, &quot;transform&quot;: [{&quot;filter&quot;: {&quot;selection&quot;: &quot;selector002&quot;}}]}, {&quot;mark&quot;: {&quot;type&quot;: &quot;text&quot;, &quot;align&quot;: &quot;left&quot;, &quot;dx&quot;: 5, &quot;dy&quot;: -5}, &quot;encoding&quot;: {&quot;color&quot;: {&quot;type&quot;: &quot;nominal&quot;, &quot;field&quot;: &quot;symbol&quot;}, &quot;text&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;price&quot;}, &quot;x&quot;: {&quot;type&quot;: &quot;temporal&quot;, &quot;field&quot;: &quot;date&quot;}, &quot;y&quot;: {&quot;type&quot;: &quot;quantitative&quot;, &quot;field&quot;: &quot;price&quot;, &quot;scale&quot;: {&quot;type&quot;: &quot;log&quot;}}}, &quot;transform&quot;: [{&quot;filter&quot;: {&quot;selection&quot;: &quot;selector002&quot;}}]}], &quot;data&quot;: {&quot;url&quot;: &quot;https://vega.github.io/vega-datasets/data/stocks.csv&quot;}, &quot;height&quot;: 400, &quot;width&quot;: 700, &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v4.0.2.json&quot;}, {&quot;mode&quot;: &quot;vega-lite&quot;});
&lt;/script&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Data-Tables&quot;&gt;Data Tables&lt;a class=&quot;anchor-link&quot; href=&quot;#Data-Tables&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;You can display tables per the usual way in your blog:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;

&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython3&quot;&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;movies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;https://vega.github.io/vega-datasets/data/movies.json&amp;#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;movies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# display table with pandas&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Title&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Worldwide_Gross&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;s1&quot;&gt;&amp;#39;Production_Budget&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Distributor&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MPAA_Rating&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;IMDB_Rating&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Rotten_Tomatoes_Rating&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;

&lt;div class=&quot;output_area&quot;&gt;


&lt;div class=&quot;output_html rendered_html output_subarea output_execute_result&quot;&gt;
&lt;div&gt;
&lt;style scoped=&quot;&quot;&gt;
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
&lt;/style&gt;
&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr style=&quot;text-align: right;&quot;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Title&lt;/th&gt;
      &lt;th&gt;Worldwide_Gross&lt;/th&gt;
      &lt;th&gt;Production_Budget&lt;/th&gt;
      &lt;th&gt;Distributor&lt;/th&gt;
      &lt;th&gt;MPAA_Rating&lt;/th&gt;
      &lt;th&gt;IMDB_Rating&lt;/th&gt;
      &lt;th&gt;Rotten_Tomatoes_Rating&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;The Land Girls&lt;/td&gt;
      &lt;td&gt;146083.0&lt;/td&gt;
      &lt;td&gt;8000000.0&lt;/td&gt;
      &lt;td&gt;Gramercy&lt;/td&gt;
      &lt;td&gt;R&lt;/td&gt;
      &lt;td&gt;6.1&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;First Love, Last Rites&lt;/td&gt;
      &lt;td&gt;10876.0&lt;/td&gt;
      &lt;td&gt;300000.0&lt;/td&gt;
      &lt;td&gt;Strand&lt;/td&gt;
      &lt;td&gt;R&lt;/td&gt;
      &lt;td&gt;6.9&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;I Married a Strange Person&lt;/td&gt;
      &lt;td&gt;203134.0&lt;/td&gt;
      &lt;td&gt;250000.0&lt;/td&gt;
      &lt;td&gt;Lionsgate&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;6.8&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;Let's Talk About Sex&lt;/td&gt;
      &lt;td&gt;373615.0&lt;/td&gt;
      &lt;td&gt;300000.0&lt;/td&gt;
      &lt;td&gt;Fine Line&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;13.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;Slam&lt;/td&gt;
      &lt;td&gt;1087521.0&lt;/td&gt;
      &lt;td&gt;1000000.0&lt;/td&gt;
      &lt;td&gt;Trimark&lt;/td&gt;
      &lt;td&gt;R&lt;/td&gt;
      &lt;td&gt;3.4&lt;/td&gt;
      &lt;td&gt;62.0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    

&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Images&quot;&gt;Images&lt;a class=&quot;anchor-link&quot; href=&quot;#Images&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;h3 id=&quot;Local-Images&quot;&gt;Local Images&lt;a class=&quot;anchor-link&quot; href=&quot;#Local-Images&quot;&gt; &lt;/a&gt;&lt;/h3&gt;&lt;p&gt;You can reference local images and they will be copied and rendered on your blog automatically.  You can include these with the following markdown syntax:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;![](my_icons/fastai_logo.png)&lt;/code&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;&lt;img src=&quot;/myfastpage/images/copied_from_nb/my_icons/fastai_logo.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h3 id=&quot;Remote-Images&quot;&gt;Remote Images&lt;a class=&quot;anchor-link&quot; href=&quot;#Remote-Images&quot;&gt; &lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Remote images can be included with the following markdown syntax:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;![](https://image.flaticon.com/icons/svg/36/36686.svg)&lt;/code&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https://image.flaticon.com/icons/svg/36/36686.svg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h3 id=&quot;Animated-Gifs&quot;&gt;Animated Gifs&lt;a class=&quot;anchor-link&quot; href=&quot;#Animated-Gifs&quot;&gt; &lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Animated Gifs work, too!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;![](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif)&lt;/code&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h3 id=&quot;Captions&quot;&gt;Captions&lt;a class=&quot;anchor-link&quot; href=&quot;#Captions&quot;&gt; &lt;/a&gt;&lt;/h3&gt;&lt;p&gt;You can include captions with markdown images like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;![](https://www.fast.ai/images/fastai_paper/show_batch.png &quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://www.fast.ai/images/fastai_paper/show_batch.png&quot; alt=&quot;&quot; title=&quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot; /&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h1 id=&quot;Other-Elements&quot;&gt;Other Elements&lt;a class=&quot;anchor-link&quot; href=&quot;#Other-Elements&quot;&gt; &lt;/a&gt;&lt;/h1&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Tweetcards&quot;&gt;Tweetcards&lt;a class=&quot;anchor-link&quot; href=&quot;#Tweetcards&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Typing &lt;code&gt;&amp;gt; twitter: https://twitter.com/jakevdp/status/1204765621767901185?s=20&lt;/code&gt; will render this:

&lt;center&gt;
    &lt;div class=&quot;jekyll-twitter-plugin&quot;&gt;&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Altair 4.0 is released! &lt;a href=&quot;https://t.co/PCyrIOTcvv&quot;&gt;https://t.co/PCyrIOTcvv&lt;/a&gt;&lt;br /&gt;Try it with:&lt;br /&gt;&lt;br /&gt;  pip install -U altair&lt;br /&gt;&lt;br /&gt;The full list of changes is at &lt;a href=&quot;https://t.co/roXmzcsT58&quot;&gt;https://t.co/roXmzcsT58&lt;/a&gt; ...read on for some highlights. &lt;a href=&quot;https://t.co/vWJ0ZveKbZ&quot;&gt;pic.twitter.com/vWJ0ZveKbZ&lt;/a&gt;&lt;/p&gt;&amp;mdash; Jake VanderPlas (@jakevdp) &lt;a href=&quot;https://twitter.com/jakevdp/status/1204765621767901185?ref_src=twsrc%5Etfw&quot;&gt;December 11, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;/div&gt;
&lt;/center&gt;
&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Youtube-Videos&quot;&gt;Youtube Videos&lt;a class=&quot;anchor-link&quot; href=&quot;#Youtube-Videos&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Typing &lt;code&gt;&amp;gt; youtube: https://youtu.be/XfoYk_Z5AkI&lt;/code&gt; will render this:

&lt;center&gt;
    &lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/XfoYk_Z5AkI&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/center&gt;
&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Boxes-/-Callouts&quot;&gt;Boxes / Callouts&lt;a class=&quot;anchor-link&quot; href=&quot;#Boxes-/-Callouts&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Typing &lt;code&gt;&amp;gt; Warning: There will be no second warning!&lt;/code&gt; will render this:
&lt;div class=&quot;flash flash-error&quot;&gt;
    &lt;svg class=&quot;octicon octicon-alert&quot; viewBox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; width=&quot;16&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Warning: &lt;/strong&gt;There will be no second warning!
&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Typing &lt;code&gt;&amp;gt; Important: Pay attention! It's important.&lt;/code&gt; will render this:
&lt;div class=&quot;flash flash-warn&quot;&gt;
    &lt;svg class=&quot;octicon octicon-zap&quot; viewBox=&quot;0 0 10 16&quot; version=&quot;1.1&quot; width=&quot;10&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M10 7H6l3-7-9 9h4l-3 7 9-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Important: &lt;/strong&gt;Pay attention! It&amp;#8217;s important.
&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Typing &lt;code&gt;&amp;gt; Tip: This is my tip.&lt;/code&gt; will render this:
&lt;div class=&quot;flash flash-success&quot;&gt;
    &lt;svg class=&quot;octicon octicon-checklist&quot; viewBox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; width=&quot;16&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M16 8.5l-6 6-3-3L8.5 10l1.5 1.5L14.5 7 16 8.5zM5.7 12.2l.8.8H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h7c.55 0 1 .45 1 1v6.5l-.8-.8c-.39-.39-1.03-.39-1.42 0L5.7 10.8a.996.996 0 000 1.41v-.01zM4 4h5V3H4v1zm0 2h5V5H4v1zm0 2h3V7H4v1zM3 9H2v1h1V9zm0-2H2v1h1V7zm0-2H2v1h1V5zm0-2H2v1h1V3z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Tip: &lt;/strong&gt;This is my tip.
&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Typing &lt;code&gt;&amp;gt; Note: Take note of this.&lt;/code&gt; will render this:
&lt;div class=&quot;flash&quot;&gt;
    &lt;svg class=&quot;octicon octicon-info&quot; viewBox=&quot;0 0 14 16&quot; version=&quot;1.1&quot; width=&quot;14&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M6.3 5.69a.942.942 0 01-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 01-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Note: &lt;/strong&gt;Take note of this.
&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;Typing &lt;code&gt;&amp;gt; Note: A doc link to [an example website: fast.ai](https://www.fast.ai/) should also work fine.&lt;/code&gt; will render in the docs:
&lt;div class=&quot;flash&quot;&gt;
    &lt;svg class=&quot;octicon octicon-info octicon octicon-info&quot; viewBox=&quot;0 0 14 16&quot; version=&quot;1.1&quot; width=&quot;14&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M6.3 5.69a.942.942 0 01-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 01-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
    &lt;strong&gt;Note: &lt;/strong&gt;A doc link to &lt;a href=&quot;https://www.fast.ai/&quot;&gt;an example website: fast.ai&lt;/a&gt; should also work fine.
&lt;/div&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h2 id=&quot;Footnotes&quot;&gt;Footnotes&lt;a class=&quot;anchor-link&quot; href=&quot;#Footnotes&quot;&gt; &lt;/a&gt;&lt;/h2&gt;&lt;p&gt;You can have footnotes in notebooks, however the syntax is different compared to markdown documents. &lt;a href=&quot;https://github.com/fastai/fastpages/blob/master/_fastpages_docs/NOTEBOOK_FOOTNOTES.md&quot;&gt;This guide provides more detail about this syntax&lt;/a&gt;, which looks like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;For example, here is a footnote {% fn 1 %}.
And another {% fn 2 %}
{{ 'This is the footnote.' | fndetail: 1 }}
{{ 'This is the other footnote. You can even have a [link](www.github.com)!' | fndetail: 2 }}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For example, here is a footnote &lt;sup id=&quot;fnref-1&quot; class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;And another &lt;sup id=&quot;fnref-2&quot; class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn-2&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;p id=&quot;fn-1&quot;&gt;1. This is the footnote.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote footnotes&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;
&lt;div class=&quot;footnotes&quot;&gt;&lt;p id=&quot;fn-2&quot;&gt;2. This is the other footnote. You can even have a &lt;a href=&quot;www.github.com&quot;&gt;link&lt;/a&gt;!&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote footnotes&quot;&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wzhliang.github.io/myfastpage/images/chart-preview.png" /><media:content medium="image" url="https://wzhliang.github.io/myfastpage/images/chart-preview.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">An Example Markdown Post</title><link href="https://wzhliang.github.io/myfastpage/markdown/2020/01/14/test-markdown-post.html" rel="alternate" type="text/html" title="An Example Markdown Post" /><published>2020-01-14T00:00:00-06:00</published><updated>2020-01-14T00:00:00-06:00</updated><id>https://wzhliang.github.io/myfastpage/markdown/2020/01/14/test-markdown-post</id><content type="html" xml:base="https://wzhliang.github.io/myfastpage/markdown/2020/01/14/test-markdown-post.html">&lt;h1 id=&quot;example-markdown-post&quot;&gt;Example Markdown Post&lt;/h1&gt;

&lt;h2 id=&quot;basic-setup&quot;&gt;Basic setup&lt;/h2&gt;

&lt;p&gt;Jekyll requires blog post files to be named according to the following format:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;YEAR-MONTH-DAY-filename.md&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Where &lt;code class=&quot;highlighter-rouge&quot;&gt;YEAR&lt;/code&gt; is a four-digit number, &lt;code class=&quot;highlighter-rouge&quot;&gt;MONTH&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;DAY&lt;/code&gt; are both two-digit numbers, and &lt;code class=&quot;highlighter-rouge&quot;&gt;filename&lt;/code&gt; is whatever file name you choose, to remind yourself what this post is about. &lt;code class=&quot;highlighter-rouge&quot;&gt;.md&lt;/code&gt; is the file extension for markdown files.&lt;/p&gt;

&lt;p&gt;The first line of the file should start with a single hash character, then a space, then your title. This is how you create a “&lt;em&gt;level 1 heading&lt;/em&gt;” in markdown. Then you can create level 2, 3, etc headings as you wish but repeating the hash character, such as you see in the line &lt;code class=&quot;highlighter-rouge&quot;&gt;## File names&lt;/code&gt; above.&lt;/p&gt;

&lt;h2 id=&quot;basic-formatting&quot;&gt;Basic formatting&lt;/h2&gt;

&lt;p&gt;You can use &lt;em&gt;italics&lt;/em&gt;, &lt;strong&gt;bold&lt;/strong&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;code font text&lt;/code&gt;, and create &lt;a href=&quot;https://www.markdownguide.org/cheat-sheet/&quot;&gt;links&lt;/a&gt;. Here’s a footnote &lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. Here’s a horizontal rule:&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;lists&quot;&gt;Lists&lt;/h2&gt;

&lt;p&gt;Here’s a list:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;item 1&lt;/li&gt;
  &lt;li&gt;item 2&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And a numbered list:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;item 1&lt;/li&gt;
  &lt;li&gt;item 2&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;boxes-and-stuff&quot;&gt;Boxes and stuff&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;This is a quotation&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;Toast Toast--warning googoo&quot;&gt;
   &lt;span class=&quot;Toast-icon&quot;&gt;&lt;svg class=&quot;octicon octicon-alert&quot; viewBox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; width=&quot;16&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;
   &lt;span class=&quot;Toast-content&quot;&gt;You can include alert boxes&lt;/span&gt;
&lt;/div&gt;

&lt;p&gt;…and…&lt;/p&gt;

&lt;div class=&quot;Toast&quot;&gt;
   &lt;span class=&quot;Toast-icon&quot;&gt;&lt;svg class=&quot;octicon octicon-info&quot; viewBox=&quot;0 0 14 16&quot; version=&quot;1.1&quot; width=&quot;14&quot; height=&quot;16&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M6.3 5.69a.942.942 0 01-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 01-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;
   &lt;span class=&quot;Toast-content&quot;&gt;You can include info boxes&lt;/span&gt;
&lt;/div&gt;

&lt;h2 id=&quot;images&quot;&gt;Images&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/myfastpage/images/logo.png&quot; alt=&quot;&quot; title=&quot;fast.ai's logo&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;code&quot;&gt;Code&lt;/h2&gt;

&lt;p&gt;You can format text and code per usual&lt;/p&gt;

&lt;p&gt;General preformatted text:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Do a thing
do_thing()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Python code and output:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Prints '2'
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Formatting text as shell commands:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;hello world&quot;&lt;/span&gt;
./some_script.sh &lt;span class=&quot;nt&quot;&gt;--option&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;value&quot;&lt;/span&gt;
wget https://example.com/cat_photo1.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Formatting text as YAML:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;another_key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;another&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;value&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;tables&quot;&gt;Tables&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Column 1&lt;/th&gt;
      &lt;th&gt;Column 2&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;A thing&lt;/td&gt;
      &lt;td&gt;Another thing&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;tweetcards&quot;&gt;Tweetcards&lt;/h2&gt;

&lt;div class=&quot;jekyll-twitter-plugin&quot;&gt;&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Altair 4.0 is released! &lt;a href=&quot;https://t.co/PCyrIOTcvv&quot;&gt;https://t.co/PCyrIOTcvv&lt;/a&gt;&lt;br /&gt;Try it with:&lt;br /&gt;&lt;br /&gt;  pip install -U altair&lt;br /&gt;&lt;br /&gt;The full list of changes is at &lt;a href=&quot;https://t.co/roXmzcsT58&quot;&gt;https://t.co/roXmzcsT58&lt;/a&gt; ...read on for some highlights. &lt;a href=&quot;https://t.co/vWJ0ZveKbZ&quot;&gt;pic.twitter.com/vWJ0ZveKbZ&lt;/a&gt;&lt;/p&gt;&amp;mdash; Jake VanderPlas (@jakevdp) &lt;a href=&quot;https://twitter.com/jakevdp/status/1204765621767901185?ref_src=twsrc%5Etfw&quot;&gt;December 11, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async=&quot;&quot; src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;/div&gt;

&lt;h2 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h2&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;This is the footnote. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html">Example Markdown Post</summary></entry></feed>